import projectConfig from '/pagic.config.js';
export default {
    'prev': undefined,
    'next': undefined,
    config: { "root": "/", ...projectConfig, branch: 'main' },
    'pagePath': "articles/blitzjs/blitz-introduction-1.md",
    'layoutPath': "_layout.tsx",
    'outputPath': "articles/blitzjs/blitz-introduction-1.html",
    'title': "Blitz.js å…¥é—¨æ•™ç¨‹ï¼šåŸºäº Next.js çš„ä¸‹ä¸€ä»£ React å…¨æ ˆæ¡†æ¶",
    'content': React.createElement("article", { dangerouslySetInnerHTML: {
            __html: '<h1>Blitz.js å…¥é—¨æ•™ç¨‹ï¼šåŸºäº Next.js çš„ä¸‹ä¸€ä»£ React å…¨æ ˆæ¡†æ¶</h1>\n<h2 id="%E8%AF%91%E8%80%85%E5%BA%8F">è¯‘è€…åº<a class="anchor" href="#%E8%AF%91%E8%80%85%E5%BA%8F">Â§</a></h2>\n<p>è‹¦ JS ç”Ÿæ€ä¹…å·²ã€‚åœ¨ 2020 å¹´åï¼Œä¸€ç›´å¾˜å¾Šäºè¯¥ä¸ºè‡ªå·±æ„å»ºæ€æ ·çš„æŠ€æœ¯æ ˆï¼Œè¿Ÿè¿Ÿæ²¡æœ‰å¤ªå¤šè½åœ°æˆæœâ€”â€”åº“å¤ªå¤šäº†ï¼Œä¸€ä¸ªå°åœºæ™¯å°±èƒ½æœ‰å¾ˆå¤šä¸ªè§£å†³æ–¹æ¡ˆï¼›æ–¹å‘ä¹Ÿå¤ªå¤šäº†ï¼Œå“ªæ€•å¤§å‰ç«¯ä¸‰ä¸ªå­—ï¼Œç°ä»Šéƒ½èƒ½æ‹†åˆ†ä¸ºå¾ˆå¤šçš„ç»†åˆ†é¢†åŸŸã€‚ç›´åˆ°é‡åˆ°äº† Romeï¼Œçœ‹åˆ°ç¤¾åŒºå·²ç»å¼€å§‹å°è¯•æ•´åˆé‡æ„ Node ç”Ÿæ€çš„å‰ç«¯å·¥å…·é“¾ï¼›åˆé‡åˆ°äº† Denoï¼Œç›´æ¥æ‘†è„± Node çš„å†å²é—ç•™é—®é¢˜æ¥å»ºè®¾æ›´è´´è¿‘ç°ä»£æ ‡å‡†çš„ JavaScript/TypeScript è¿è¡Œæ—¶ï¼›ç°åœ¨åˆé‡åˆ°äº† Blitz.jsï¼Œä¸€ç«™å¼ React å…¨æ ˆæ¡†æ¶ï¼Œåœ¨ Next.js ä¹‹ä¸Šèµ‹èƒ½æ›´å¤šçš„åç«¯åœºæ™¯...äºæ˜¯è‡ªå·±çš„å¾ˆå¤šæ–¹å‘æ€§é—®é¢˜éƒ½è±ç„¶å¼€æœ—ï¼šé€šè¿‡å»ºç«‹ä¸åŒçš„ Repo æ¥ä¸“æ”»ä¸åŒçš„æ–¹å‘ï¼Œä¸”æ¯ä¸ª Repo éƒ½èƒ½æœ‰ä»£è¡¨æ€§çš„åŒæ—¶ï¼Œè¦†ç›–æ›´å¤šçš„åœºæ™¯ã€‚äºæ˜¯â€”â€”</p>\n<ul>\n<li><a href="https://github.com/hylerrix/deno-tutorial">Deno é’»ç ”ä¹‹æœ¯</a>ï¼šçœ‹æœªæ¥ï¼Œå­¦æ ‡å‡†ã€‚Node ä¹Ÿä¸è½ä¸‹ã€‚</li>\n<li><a href="https://github.com/hylerrix/deno-algorithm">Deno ç®—æ³•ä¹‹æ—…</a>ï¼šåˆ·ç®—æ³•ï¼Œç©æµ‹è¯•ã€‚</li>\n<li><a href="https://github.com/hylerrix/es-interview">ECMAScript é¢è¯•å®å…¸</a>ï¼šå¤‡é¢è¯•ï¼Œæ‰“åŸºç¡€ï¼›</li>\n<li><a href="https://github.com/hylerrix/blitzjs-tutorial">Blitz.js + React å…¨æ ˆå¼€å‘æ‰‹å†Œ</a>ï¼šæå·¥ç¨‹ï¼Œå°å…¨æ ˆã€‚æ·±å…¥ Reactï¼Œå®æˆ˜ Next.jsï¼ŒæŒæ¡åç«¯å¼€å‘ã€‚</li>\n<li>ä»¥åŠè¿˜æœ‰ä¸€åˆ‡å¼ƒå‘çš„ repo......</li>\n</ul>\n<p>å½“ç„¶ï¼ŒBlitz.js è¿˜æœ‰å¾ˆå¤šå¸å¼•äººçš„ç‰¹æ€§ï¼š</p>\n<ul>\n<li><strong>ä¸€ä½“å¼å…¨æ ˆæ¶æ„</strong>ï¼šåœ¨ä¸€ä¸ª Monorepo é‡Œä»æ•°æ®åº“åˆ°ç”¨æˆ·ç«¯å…¨æå®šï¼Œä¹Ÿæ²¡ç”¨é‡å¤æ€§ä»£ç ã€‚è¯•æƒ³å‰åç«¯åˆ†ç¦»çš„æ¶æ„ä¸‹ï¼Œå¦‚æœä½ å–œæ¬¢ TypeScript çš„è¯ï¼Œå¾ˆå¯èƒ½å¾—å†™ä¸¤å¥—ç›¸åŒ TS...ä¸”è¿™ç§ä¸€ä½“å¼æ¶æ„å¾ˆå®¹æ˜“è®©è‡ªå·±çš„é¡¹ç›®çµæ„Ÿä»å¤´åˆ°å°¾åœ°å¿«é€Ÿè½åœ°ã€‚</li>\n<li><strong>API ä¸å†å¿…é¡»</strong>ï¼šREST å’Œ GraphQLï¼Ÿæˆ–è®¸éƒ½ä¸éœ€è¦ï¼Œäº¤ç»™ Blitz.js æ¥åœ¨ç¼–è¯‘æ—¶æ„å»ºã€‚å½“éœ€è¦æä¾› API ç»™æ›´å¤šç«¯ä½¿ç”¨æ—¶ï¼Œå†ç»“åˆç›¸å…³åº“æ¥ç”Ÿæˆ APIã€‚</li>\n<li><strong>æ›´è½»æ¾çš„å¼€ç®±ä½“éªŒ</strong>ï¼šè„šæ‰‹æ¶åˆå§‹åŒ–åç›´æ¥æä¾›ç™»å½•æ³¨å†Œç”šè‡³é‡ç½®å¯†ç åŠŸèƒ½ï¼Œç›´æ¥æ”¯æŒæœ€åŸºæœ¬çš„åç«¯ç¯å¢ƒï¼Œå¼€ç®±å³ç”¨çš„ä½“éªŒä¸èƒ½å†å¥½ï¼ŒåŒæ—¶ç”šè‡³èƒ½é€šè¿‡å¼ºå¤§çš„ blitz generate CLI å¿«é€Ÿæ¤å…¥ç”Ÿæ€åœˆä¸­çš„ä¸»æµåº“åˆ°é¡¹ç›®ä¸­ã€‚</li>\n<li><strong>å¹¶ä¸ä¼šâ€œå­¦ä¸åŠ¨äº†â€</strong>ï¼šåŸºäº Next.jsï¼Œå‰ç«¯ Reactï¼Œåç«¯ Prisma ç­‰åº“ï¼ŒBlitz.js æ„å»ºäºå„ç§å·²ç»ä¸»æµåŒ–çš„ç”Ÿæ€ä¹‹ä¸Šã€‚</li>\n<li><strong>æ‹¥æŠ±æœªæ¥</strong>ï¼šBlitz.js é¢„è®¡å°†äºä¸‹ä¸ªæœˆï¼ˆ2021 å¹´ 4 æœˆï¼‰å‘å¸ƒ v1.0 ç‰ˆæœ¬ã€‚</li>\n</ul>\n<p>æœ¬æ–‡å±äºã€Š<a href="https://github.com/hylerrix/blitzjs-tutorial">Blitz.js + React å…¨æ ˆå¼€å‘æ‰‹å†Œ</a>ã€‹ç³»åˆ—ï¼ŒåŸæ–‡ç¿»è¯‘å†…å®¹ä¼šåŒæ­¥æ›´æ–°åˆ° <a href="https://github.com/blitz-js/zh-hans.blitzjs.com">Blitz.js ä¸­æ–‡ä»“åº“</a> ä¸Šã€‚æ¬¢è¿ Star å’Œ Watchï¼š<a href="https://github.com/hylerrix/blitzjs-tutorial">https://github.com/hylerrix/blitzjs-tutorial</a>ã€‚</p>\n<h2 id="%E5%BF%AB%E9%80%9F%E5%85%A5%E6%89%8B">å¿«é€Ÿå…¥æ‰‹<a class="anchor" href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E6%89%8B">Â§</a></h2>\n<h3 id="%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%E7%8E%AF%E5%A2%83">é…ç½®ä½ çš„ç¯å¢ƒ<a class="anchor" href="#%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%E7%8E%AF%E5%A2%83">Â§</a></h3>\n<p>ä½ éœ€è¦ä½¿ç”¨ Node 12 æˆ–è€…æ›´æ–°çš„ç‰ˆæœ¬ã€‚</p>\n<h3 id="%E5%AE%89%E8%A3%85-blitz">å®‰è£… Blitz<a class="anchor" href="#%E5%AE%89%E8%A3%85-blitz">Â§</a></h3>\n<p>æ‰§è¡Œ <code>npm install -g blitz</code></p>\n<h3 id="%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E9%A1%B9%E7%9B%AE">åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®<a class="anchor" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E9%A1%B9%E7%9B%AE">Â§</a></h3>\n<ol>\n<li><code>blitz new myAppName</code></li>\n<li><code>cd myAppName</code></li>\n<li><code>blitz dev</code></li>\n<li>è®¿é—®ä½ çš„æ–°é¡¹ç›® <a href="http://localhost:3000">http://localhost:3000</a></li>\n</ol>\n<h3 id="%E6%AC%A2%E8%BF%8E%E6%9D%A5%E5%88%B0-blitz-%E7%A4%BE%E5%8C%BA-%F0%9F%91%8B">æ¬¢è¿æ¥åˆ° Blitz ç¤¾åŒº ğŸ‘‹<a class="anchor" href="#%E6%AC%A2%E8%BF%8E%E6%9D%A5%E5%88%B0-blitz-%E7%A4%BE%E5%8C%BA-%F0%9F%91%8B">Â§</a></h3>\n<p>Blitz ç¤¾åŒºæ˜¯ä¸ªæ¸©æš–ã€å®‰å…¨ã€å¤šæ ·åŒ–ã€åŒ…å®¹ä¹Ÿä¸å¤±æœ‰è¶£çš„ç¤¾åŒºï¼ LGBTQ+ã€å¥³ç”Ÿå’Œå°‘æ•°æ´¾æ¬¢è¿ä½ ä»¬çš„åˆ°æ¥ã€‚</p>\n<p><a href="https://discord.blitzjs.com">åŠ å…¥æˆ‘ä»¬çš„ Discord ç¤¾åŒº</a>ï¼Œæˆ‘ä»¬ä¼šåœ¨è¿™é‡Œå¸®åŠ©æ¯ä¸ªäººæ­å»º Blitz åº”ç”¨ã€‚è¿™é‡Œä¹Ÿæ˜¯æˆ‘ä»¬åä½œå…±å»º Blitz æœ¬èº«çš„é‡è¦åœºåœ°ã€‚</p>\n<p>å¯¹äºæé—®ä»¥åŠä¼šèŠ±è´¹è¾ƒé•¿æ—¶é—´çš„è®¨è®ºï¼Œ<a href="https://github.com/blitz-js/blitz/discussions">å¯ä»¥å‘å¸–åˆ°æˆ‘ä»¬çš„è®ºå›ä¸­</a>ã€‚</p>\n<p>æœ‰å…³å®Œæ•´çš„ä»‹ç»ï¼Œè¯·é˜…è¯» ç¤¾åŒºæ˜¯å¦‚ä½•è¿ä½œçš„ã€‚æ–‡ä¸­åŒ…æ‹¬äº†å¦‚ä½•è·å¾—å¸®åŠ©ã€å¦‚ä½•æŠ¥å‘Šé”™è¯¯ä»¥åŠå¦‚ä½•æå‡ºæ–°åŠŸèƒ½å»ºè®®ç­‰çš„è¯¦ç»†æŒ‡å¯¼ã€‚</p>\n<p><strong>æ¬¢è¿ä½ çš„å¸®åŠ©æ¥ä½¿ Blitz å˜å¾—æ›´å¥½ï¼ ğŸ¤</strong></p>\n<p>æˆ‘ä»¬æœ‰ä¸€ä¸ªå¾ˆæ£’çš„ç¤¾åŒºæ­£åœ¨å…±åŒåŠªåŠ›è®© Blitz æˆä¸ºä¸–ç•Œä¸Šä¸€æµçš„æ¡†æ¶ã€‚</p>\n<p>ä½ è¯¥å¦‚ä½•æä¾›å¸®åŠ©ï¼š</p>\n<ol>\n<li>é€šè¿‡ <a href="https://github.com/blitz-js/blitz/issues/new/choose">åœ¨ GitHub ä¸Šæäº¤ issue</a> æ¥åé¦ˆ Bugã€‚</li>\n<li>è´¡çŒ®ä»£ç ï¼š é˜…è¯»è´¡çŒ®æŒ‡å—ï¼Œä»¥äº†è§£å¦‚ä½•å¼€å§‹ã€‚</li>\n<li><a href="https://github.com/blitz-js/blitz#sponsors-and-donations">èµåŠ© &amp; æèµ </a>ï¼Œå¯ä»¥ä» $5/æœˆ å¼€å§‹ã€‚</li>\n<li>ä»¥åŠä½ è§‰å¾—å¯ä»¥çš„å…¶å®ƒä»»ä½•æ–¹å¼ï¼æˆ‘ä»¬éå¸¸æ„Ÿè°¢ä½ çš„ä»»ä½•è´¡çŒ®ï¼ˆå¦‚æ–‡æ¡£ã€è§†é¢‘ã€åšå®¢ç­‰ï¼‰ã€‚å¦‚æœä½ é‡åˆ°ä»»ä½•é˜»ç¢ï¼Œæ¬¢è¿æ¥ Discord ä¸Šä¸æˆ‘ä»¬äº¤æµï¼:)</li>\n</ol>\n<h3 id="%E4%B8%8B%E4%B8%80%E6%AD%A5">ä¸‹ä¸€æ­¥<a class="anchor" href="#%E4%B8%8B%E4%B8%80%E6%AD%A5">Â§</a></h3>\n<h4 id="%E6%95%99%E7%A8%8B">æ•™ç¨‹<a class="anchor" href="#%E6%95%99%E7%A8%8B">Â§</a></h4>\n<p>æ•™ç¨‹ç¯‡ æ˜¯æœ‰å…³ Blitz æ‰€æœ‰åŸºæœ¬å†…å®¹çš„å®Œæ•´ç»ƒä¹ ï¼Œå…¶ä¸­åŒ…æ‹¬å°†æ¨¡å‹æ·»åŠ åˆ°æ•°æ®åº“ä»¥åŠä»å‰ç«¯è¯»å–å’Œæ›´æ–°æ•°æ®ã€‚</p>\n<h4 id="%E5%AD%A6%E4%B9%A0">å­¦ä¹ <a class="anchor" href="#%E5%AD%A6%E4%B9%A0">Â§</a></h4>\n<p>è¿™é‡Œæœ‰ä½ æƒ³è¦ç†Ÿæ‚‰çš„ Blitz çš„å…³é”®æ¦‚å¿µï¼š</p>\n<ul>\n<li>å¦‚ä½• æ–°å»ºé¡µé¢</li>\n<li>å¦‚ä½• ä½¿ç”¨æ–‡ä»¶è·¯ç”±ç³»ç»Ÿ</li>\n<li>å¦‚ä½•è®¾ç½®å¹¶ ä½¿ç”¨æ•°æ®åº“</li>\n<li>å¦‚ä½•ä½¿ç”¨ Blitz Queries å’Œ Mutations æ¥è¯»å†™ä½ çš„æ•°æ®åº“ã€‚</li>\n<li>å¦‚ä½•é€šè¿‡ <code>blitz generate</code> å‘½ä»¤æ¥ç”¨è„šæ‰‹æ¶ç”Ÿæˆæ•°æ®åº“æ¨¡å‹\nçš„æ‰€æœ‰ä»£ç ã€‚</li>\n</ul>\n<h2 id="%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B">å…¥é—¨æ•™ç¨‹<a class="anchor" href="#%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B">Â§</a></h2>\n<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šæŒ‡å¯¼ä½ åˆ›å»ºä¸€ä¸ªç®€æ˜“çš„æŠ•ç¥¨ç³»ç»Ÿã€‚</p>\n<p>æˆ‘ä»¬å°†å‡è®¾ä½ å·²ç» å®‰è£…äº† Blitzã€‚ä½ å¯ä»¥é€šè¿‡åœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç¡®å®š Blitz æ˜¯å¦å·²ç»å®‰è£…æˆ–æ£€æŸ¥å®‰è£…çš„ç‰ˆæœ¬å·ï¼š</p>\n<pre class="language-bash"><code class="language-bash">blitz -v\n</code></pre>\n<p>å¦‚æœ Blitz å·²ç»å®‰è£…æˆåŠŸï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°å®‰è£…çš„ç‰ˆæœ¬å·ã€‚å¦åˆ™ä½ ä¼šæ”¶åˆ°ä¸€æ¡åƒè¿™æ ·çš„é”™è¯¯æç¤ºï¼šâ€œcommand not found: blitzâ€ã€‚</p>\n<h3 id="%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E5%BA%94%E7%94%A8">åˆ›å»ºä¸€ä¸ªæ–°åº”ç”¨<a class="anchor" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E5%BA%94%E7%94%A8">Â§</a></h3>\n<p>åœ¨å‘½ä»¤è¡Œä¸­ï¼Œ<code>cd</code> è¿›å…¥ä½ æƒ³è¦åˆ›å»ºåº”ç”¨çš„æ ¹ç›®å½•æ–‡ä»¶å¤¹åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>\n<pre class="language-autoit"><code class="language-autoit">blitz new my<span class="token operator">-</span>blitz<span class="token operator">-</span>app\n</code></pre>\n<p>Blitz ä¼šåœ¨ä½ å½“å‰çš„æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª <code>my-blitz-app</code> æ–‡ä»¶å¤¹ã€‚ä½ æ¥ç€ä¼šæ”¶åˆ°ä¸€ä¸ªé€‰æ‹©è¡¨å•åº“çš„æç¤ºã€‚æœ¬æ•™ç¨‹ä¸­å°†é€‰æ‹©å…¶ä¸­æ¨èçš„ <code>React Final Form</code> åº“ã€‚</p>\n<p>è®©æˆ‘ä»¬çœ‹çœ‹ <code>blitz new</code> å‘½ä»¤åˆ›å»ºäº†ä»€ä¹ˆï¼š</p>\n<pre class="language-markdown"><code class="language-markdown">my-blitz-app\nâ”œâ”€â”€ app/\nâ”‚   â”œâ”€â”€ api/\nâ”‚   â”œâ”€â”€ auth/\nâ”‚   â”‚   â”œâ”€â”€ components/\nâ”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx\nâ”‚   â”‚   â”‚   â””â”€â”€ SignupForm.tsx\nâ”‚   â”‚   â”œâ”€â”€ mutations/\nâ”‚   â”‚   â”‚   â”œâ”€â”€ changePassword.ts\nâ”‚   â”‚   â”‚   â”œâ”€â”€ forgotPassword.test.ts\nâ”‚   â”‚   â”‚   â”œâ”€â”€ forgotPassword.ts\nâ”‚   â”‚   â”‚   â”œâ”€â”€ login.ts\nâ”‚   â”‚   â”‚   â”œâ”€â”€ logout.ts\nâ”‚   â”‚   â”‚   â”œâ”€â”€ resetPassword.test.ts\nâ”‚   â”‚   â”‚   â”œâ”€â”€ resetPassword.ts\nâ”‚   â”‚   â”‚   â””â”€â”€ signup.ts\nâ”‚   â”‚   â”œâ”€â”€ pages/\nâ”‚   â”‚   â”‚   â”œâ”€â”€ forgot-password.tsx\nâ”‚   â”‚   â”‚   â”œâ”€â”€ login.tsx\nâ”‚   â”‚   â”‚   â”œâ”€â”€ reset-password.tsx\nâ”‚   â”‚   â”‚   â””â”€â”€ signup.tsx\nâ”‚   â”‚   â””â”€â”€ validations.ts\nâ”‚   â”œâ”€â”€ core/\nâ”‚   â”‚   â”œâ”€â”€ components/\nâ”‚   â”‚   â”‚   â”œâ”€â”€ Form.tsx\nâ”‚   â”‚   â”‚   â””â”€â”€ LabeledTextField.tsx\nâ”‚   â”‚   â”œâ”€â”€ hooks/\nâ”‚   â”‚   â”‚   â””â”€â”€ useCurrentUser.ts\nâ”‚   â”‚   â””â”€â”€ layouts/\nâ”‚   â”‚       â””â”€â”€ Layout.tsx\nâ”‚   â”œâ”€â”€ pages/\nâ”‚   â”‚   â”œâ”€â”€ 404.tsx\nâ”‚   â”‚   â”œâ”€â”€ _app.tsx\nâ”‚   â”‚   â”œâ”€â”€ _document.tsx\nâ”‚   â”‚   â”œâ”€â”€ index.test.tsx\nâ”‚   â”‚   â””â”€â”€ index.tsx\nâ”‚   â””â”€â”€ users/\nâ”‚       â””â”€â”€ queries/\nâ”‚           â””â”€â”€ getCurrentUser.ts\nâ”œâ”€â”€ db/\nâ”‚   â”œâ”€â”€ index.ts\nâ”‚   â”œâ”€â”€ schema.prisma\nâ”‚   â””â”€â”€ seeds.ts\nâ”œâ”€â”€ integrations/\nâ”œâ”€â”€ mailers/\nâ”‚   â””â”€â”€ forgotPasswordMailer.ts\nâ”œâ”€â”€ public/\nâ”‚   â”œâ”€â”€ favicon.ico*\nâ”‚   â””â”€â”€ logo.png\nâ”œâ”€â”€ test/\nâ”‚   â”œâ”€â”€ setup.ts\nâ”‚   â””â”€â”€ utils.tsx\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ babel.config.js\nâ”œâ”€â”€ blitz.config.js\nâ”œâ”€â”€ jest.config.js\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ tsconfig.json\nâ”œâ”€â”€ types.d.ts\nâ”œâ”€â”€ types.ts\nâ””â”€â”€ yarn.lock\n</code></pre>\n<p>ä¸Šè¿°æ–‡ä»¶æœ‰ï¼š</p>\n<ul>\n<li><code>app/</code> æ–‡ä»¶å¤¹æ˜¯é¡¹ç›®ä¸­ç»å¤§å¤šæ•°åŠŸèƒ½çš„å®¹å™¨ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ”¾ç½®ä»»ä½•é¡µé¢æˆ– API è·¯ç”±ã€‚</li>\n<li><code>app/pages/</code> æ–‡ä»¶å¤¹æ˜¯ä¸»è¦çš„é¡µé¢æ–‡ä»¶å¤¹ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ Next.js ä½ å°†ä¼šç«‹å³æ³¨æ„åˆ°ä¸¤è€…çš„ä¸åŒã€‚åœ¨ Blitz ä¸­ï¼Œä½ å¯ä»¥æœ‰è®¸å¤š <code>pages</code> æ–‡ä»¶å¤¹ï¼Œå®ƒä»¬å°†åœ¨æ„å»ºæ—¶åˆå¹¶åœ¨ä¸€èµ·ã€‚</li>\n<li><code>app/core/</code> æ–‡ä»¶å¤¹æ˜¯æ”¾ç½®æ•´ä¸ªåº”ç”¨ä¸­ä½¿ç”¨åˆ°çš„é€šç”¨ç»„ä»¶ã€Hooks ç­‰çš„ä¸»è¦ä½ç½®ã€‚</li>\n<li><code>db/</code> æ˜¯æ•°æ®åº“é…ç½®æ‰€åœ¨çš„ä½ç½®ã€‚å¦‚æœä½ æ­£åœ¨ç¼–å†™æ¨¡å‹æˆ–æ£€æŸ¥è¿ç§»æƒ…å†µï¼Œå¯ä»¥æ¥è¿™é‡Œã€‚</li>\n<li><code>public/</code> æ–‡ä»¶å¤¹å¯ä»¥è®©ä½ æ”¾ç½®ä»»ä½•é™æ€èµ„æºã€‚å¦‚æœä½ æœ‰è¦åœ¨åº”ç”¨ä¸­ä½¿ç”¨çš„å›¾åƒã€æ–‡ä»¶æˆ–è§†é¢‘ç­‰ï¼Œéƒ½å¯ä»¥æ”¾ç½®åœ¨å…¶ä¸­ã€‚</li>\n<li><code>.babelrc.js</code>ã€<code>.env</code> ç­‰ï¼ˆâ€œdotfiles æ–‡ä»¶â€ï¼‰æ˜¯å„ç§ JavaScript å·¥å…·éœ€è¦ç”¨åˆ°çš„é…ç½®æ–‡ä»¶ã€‚</li>\n<li><code>blitz.config.js</code> ç”¨äº Blitz çš„é«˜çº§è‡ªå®šä¹‰é…ç½®ï¼Œä¸ <code>next.config.js</code> ç›¸åŒ</li>\n<li><code>tsconfig.json</code> æ˜¯æˆ‘ä»¬æ¨èçš„ TypeScript è®¾ç½®ã€‚</li>\n</ul>\n<h3 id="%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%9C%8D%E5%8A%A1%E5%99%A8">å¼€å‘ç¯å¢ƒæœåŠ¡å™¨<a class="anchor" href="#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%9C%8D%E5%8A%A1%E5%99%A8">Â§</a></h3>\n<p>ç°åœ¨ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰åœ¨ <code>my-blitz-app</code> æ–‡ä»¶å¤¹ä¸‹ï¼Œç¡®ä¿åˆ‡æ¢åˆ°å…¶ä¸­ï¼Œå¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>\n<pre class="language-autoit"><code class="language-autoit">blitz dev\n</code></pre>\n<p>ä½ å°†ä¼šåœ¨å‘½ä»¤è¡Œä¸­çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p>\n<pre class="language-autoit"><code class="language-autoit">âœ” Compiled\nLoaded env from <span class="token operator">/</span>private<span class="token operator">/</span>tmp<span class="token operator">/</span>my<span class="token operator">-</span>blitz<span class="token operator">-</span>app<span class="token operator">/</span><span class="token punctuation">.</span>env\nwarn  <span class="token operator">-</span> You have enabled experimental <span class="token function">feature</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span>\nwarn  <span class="token operator">-</span> Experimental features are <span class="token operator">not</span> covered by semver<span class="token punctuation">,</span> <span class="token operator">and</span> may cause unexpected <span class="token operator">or</span> broken application behavior<span class="token punctuation">.</span> Use them at your own risk<span class="token punctuation">.</span>\n\nready <span class="token operator">-</span> started server on <span class="token number">0.0</span><span class="token punctuation">.</span><span class="token number">0.0</span><span class="token punctuation">:</span><span class="token number">3000</span><span class="token punctuation">,</span> url<span class="token punctuation">:</span> http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">3000</span>\ninfo  <span class="token operator">-</span> Using external babel configuration from <span class="token operator">/</span>my<span class="token operator">-</span>blitz<span class="token operator">-</span>app<span class="token operator">/</span>babel<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js\nevent <span class="token operator">-</span> compiled successfully\n</code></pre>\n<p>ç°åœ¨æœåŠ¡å™¨å·²æˆåŠŸè¿è¡Œï¼Œæµè§ˆå™¨ä¸­è®¿é—® <a href="http://localhost:3000">localhost:3000</a>ã€‚ä½ å°†ä¼šçœ‹åˆ°å¸¦æœ‰ Blitz logo çš„æ¬¢è¿é¡µé¢ã€‚æˆåŠŸäº†ï¼</p>\n<h3 id="%E4%BB%A5%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD%E6%B3%A8%E5%86%8C">ä»¥ç”¨æˆ·èº«ä»½æ³¨å†Œ<a class="anchor" href="#%E4%BB%A5%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD%E6%B3%A8%E5%86%8C">Â§</a></h3>\n<p>Bliz åº”ç”¨è®©ç”¨æˆ·ç™»å½•å’Œæ³¨å†Œå¼€ç®±å³ç”¨ï¼ç°åœ¨è®©æˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹ã€‚ç‚¹å‡» <strong>æ³¨å†Œ</strong> æŒ‰é’®ï¼Œè¾“å…¥ä»»ä½•ç”µå­é‚®ä»¶å’Œå¯†ç ï¼Œç„¶åå•å‡» <strong>åˆ›å»ºè´¦æˆ·</strong> åï¼Œä½ å°†è¢«é‡å®šå‘åˆ°ç”¨æˆ·ä¸»é¡µï¼Œå¹¶åœ¨å…¶ä¸­å¯ä»¥çœ‹åˆ°ä½ çš„ç”¨æˆ· <code>id</code> å’Œ <code>role</code>ã€‚</p>\n<p>å¦‚æœéœ€è¦ï¼Œä½ ä¹Ÿå¯ä»¥å°è¯•æ³¨é”€å¹¶é‡æ–°ç™»å½•ã€‚æˆ–åœ¨ç™»å½•é¡µé¢ä¸Šå•å‡» <strong>å¿˜è®°å¯†ç </strong>ï¼Œä»¥å°è¯•é‡ç½®å¯†ç æµç¨‹ã€‚</p>\n<h3 id="%E7%BC%96%E5%86%99%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2">ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ªé¡µé¢<a class="anchor" href="#%E7%BC%96%E5%86%99%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2">Â§</a></h3>\n<p>æ¥ä¸‹æ¥è®©æˆ‘ä»¬åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªé¡µé¢ã€‚</p>\n<p>æ‰“å¼€ <code>app/pages/index.tsx</code> æ–‡ä»¶ç„¶åæ›¿æ¢æ‰ <code>Home</code> ç»„ä»¶çš„æ‰€æœ‰å†…å®¹ä¸ºè¿™æ®µä»£ç ï¼š</p>\n<pre class="language-jsx"><code class="language-jsx"><span class="token comment">//...</span>\n\n<span class="token keyword">const</span> <span class="token maybe-class-name">Home</span><span class="token operator">:</span> <span class="token function-variable function"><span class="token maybe-class-name">BlitzPage</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Hello, world!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">\n\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">fallback</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Loading...<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">//...</span>\n</code></pre>\n<p>ä¿å­˜æ–‡ä»¶åä½ å°†ä¼šçœ‹åˆ°æµè§ˆå™¨é¡µé¢è¿›è¡Œäº†æ›´æ–°ã€‚ä½ å¯ä»¥å¦‚ä½ æ‰€æ„¿åœ°æ·»åŠ éœ€è¦çš„å„ç§è‡ª\nå®šä¹‰é¡¹ï¼Œã€‚å‡†å¤‡å°±ç»ªåï¼Œè¯·è½¬åˆ°ä¸‹ä¸€èŠ‚ã€‚</p>\n<h3 id="%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE">æ•°æ®åº“é…ç½®<a class="anchor" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE">Â§</a></h3>\n<p>å¥½æ¶ˆæ¯æ˜¯ï¼Œå·²ç»ä¸ºä½ å»ºç«‹å¥½äº† SQLite æ•°æ®åº“ï¼ä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¿è¡Œ <code>blitz prisma studio</code> æ¥æ‰“å¼€ä¸€ä¸ªå¯ä»¥æŸ¥çœ‹æ•°æ®åº“æ•°æ®çš„ Web ç•Œé¢ã€‚</p>\n<p>è¯·æ³¨æ„ï¼Œåœ¨å¼€å§‹ç¬¬ä¸€ä¸ªå®é™…é¡¹ç›®æ—¶ï¼Œä½ å¯èƒ½å¸Œæœ›ä½¿ç”¨å¯æ‰©å±•æ€§æ›´é«˜çš„æ•°æ®åº“ï¼ˆå¦‚ PostgreSQLï¼‰ï¼Œä»¥é¿å…åœ¨å°†æ¥åˆ‡æ¢æ•°æ®åº“æ—¶äº§ç”Ÿçš„éº»çƒ¦ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ æ•°æ®åº“æ¦‚è¿° ç¯‡ã€‚ç›®å‰ï¼Œæˆ‘ä»¬å°†ç»§ç»­ä½¿ç”¨é»˜è®¤çš„ SQLite æ•°æ®åº“ã€‚</p>\n<h3 id="%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E4%BB%A3%E7%A0%81">æ¨¡å‹çš„è„šæ‰‹æ¶ä»£ç <a class="anchor" href="#%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E4%BB%A3%E7%A0%81">Â§</a></h3>\n<p>Blitz æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„ CLI å‘½ä»¤ <code>generate</code> æ¥æ„å»ºæ ·æ¿ä»£ç ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ <code>generate</code> æ¥åˆ›å»ºä¸¤ä¸ªæ¨¡å‹ï¼š<code>Question</code>ï¼ˆé—®é¢˜ï¼‰ å’Œ <code>Choice</code>ï¼ˆé€‰æ‹©ï¼‰ã€‚<code>Question</code> åŒ…å«é—®é¢˜å†…å®¹å’Œé€‰æ‹©åˆ—è¡¨ã€‚<code>Choice</code> åŒ…å«é€‰æ‹©å†…å®¹ã€æŠ•ç¥¨è®¡æ•°ä»¥åŠç›¸å…³çš„é—®é¢˜ã€‚Blitz å°†ä¸ºè¿™ä¸¤ä¸ªæ¨¡å‹è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª idã€ä¸€ä¸ªåˆ›å»ºæ—¶é—´æˆ³ä»¥åŠä¸€ä¸ªæœ€æ–°æ›´æ–°çš„æ—¶é—´æˆ³ã€‚</p>\n<h4 id="%E9%A6%96%E5%85%88%E6%88%91%E4%BB%AC%E5%B0%86%E7%94%9F%E6%88%90%E4%B8%8E-question-%E6%A8%A1%E5%9E%8B%E6%9C%89%E5%85%B3%E7%9A%84%E6%89%80%E6%9C%89%E4%BF%A1%E6%81%AF">é¦–å…ˆï¼Œæˆ‘ä»¬å°†ç”Ÿæˆä¸ <code>Question</code> æ¨¡å‹æœ‰å…³çš„æ‰€æœ‰ä¿¡æ¯ï¼š<a class="anchor" href="#%E9%A6%96%E5%85%88%E6%88%91%E4%BB%AC%E5%B0%86%E7%94%9F%E6%88%90%E4%B8%8E-question-%E6%A8%A1%E5%9E%8B%E6%9C%89%E5%85%B3%E7%9A%84%E6%89%80%E6%9C%89%E4%BF%A1%E6%81%AF">Â§</a></h4>\n<pre class="language-bash"><code class="language-bash">blitz generate all question text:string\n</code></pre>\n<p>å½“å‡ºç°æç¤ºæ¡†æ—¶ï¼ŒæŒ‰ <strong>Enter</strong> ä»¥è¿è¡Œ <code>prisma migrate</code>ï¼Œè¿™å°†ä½¿ç”¨æ–°çš„æ¨¡å‹æ¥æ›´æ–°ä½ çš„æ•°æ®åº“æ¶æ„ã€‚æ­¤æ—¶ä¼šè¦æ±‚ä¸€ä¸ªåç§°ï¼Œå¯ä»¥è¾“å…¥â€œadd questionâ€ä¹‹ç±»çš„å€¼ã€‚</p>\n<pre class="language-bash"><code class="language-bash">CREATE    app/pages/questions/<span class="token punctuation">[</span>questionId<span class="token punctuation">]</span>.tsx\nCREATE    app/pages/questions/<span class="token punctuation">[</span>questionId<span class="token punctuation">]</span>/edit.tsx\nCREATE    app/pages/questions/index.tsx\nCREATE    app/pages/questions/new.tsx\nCREATE    app/questions/components/QuestionForm.tsx\nCREATE    app/questions/queries/getQuestion.ts\nCREATE    app/questions/queries/getQuestions.ts\nCREATE    app/questions/mutations/createQuestion.ts\nCREATE    app/questions/mutations/deleteQuestion.ts\nCREATE    app/questions/mutations/updateQuestion.ts\n\nâœ” Model <span class="token keyword">for</span> <span class="token string">\'question\'</span> created <span class="token keyword">in</span> schema.prisma:\n\n<span class="token operator">></span> model Question <span class="token punctuation">{</span>\n<span class="token operator">></span>   <span class="token function">id</span>        Int      @default<span class="token punctuation">(</span>autoincrement<span class="token punctuation">(</span><span class="token punctuation">))</span> @id\n<span class="token operator">></span>   createdAt DateTime @default<span class="token punctuation">(</span>now<span class="token punctuation">(</span><span class="token punctuation">))</span>\n<span class="token operator">></span>   updatedAt DateTime @updatedAt\n<span class="token operator">></span>   text      String\n<span class="token operator">></span> <span class="token punctuation">}</span>\n\n? Run <span class="token string">\'prisma migrate dev\'</span> to update your database? <span class="token punctuation">(</span>Y/n<span class="token punctuation">)</span> â€º <span class="token boolean">true</span>\n</code></pre>\n<pre class="language-bash"><code class="language-bash">Environment variables loaded from .env\nPrisma schema loaded from db/schema.prisma\nDatasource <span class="token string">"db"</span><span class="token builtin class-name">:</span> SQLite database <span class="token string">"db.sqlite"</span> at <span class="token string">"file:./db.sqlite"</span>\n\nâœ” Name of migration â€¦ <span class="token function">add</span> question\nThe following migration<span class="token punctuation">(</span>s<span class="token punctuation">)</span> have been created and applied from new schema changes:\n\nmigrations/\n  â””â”€ 20210217035805_add_question/\n    â””â”€ migration.sql\n\nâœ” Generated Prisma Client <span class="token punctuation">(</span><span class="token number">2.17</span>.0<span class="token punctuation">)</span> to ./<a class="token email-link" href="mailto:node_modules/@prisma">node_modules/@prisma</a>/client <span class="token keyword">in</span> 103ms\n\nEverything is now <span class="token keyword">in</span> sync.\n</code></pre>\n<p><code>generate</code> å‘½ä»¤æ­é… <code>all</code> ç±»å‹å°†ç”Ÿæˆç›¸å…³çš„æ¨¡å‹ã€queriesã€mutation å’Œé¡µé¢æ–‡ä»¶ã€‚è¯·å‚è§ Blitz generate é¡µé¢æŸ¥è¯¢æ›´å¤šå¯ç”¨çš„ç±»å‹é€‰é¡¹ã€‚</p>\n<h4 id="%E6%8E%A5%E4%B8%8B%E6%9D%A5%E6%88%91%E4%BB%AC%E5%B0%86%E7%94%9F%E6%88%90%E5%B8%A6%E6%9C%89%E7%9B%B8%E5%BA%94-queries-%E5%92%8C-mutations-%E7%9A%84-choice-%E6%A8%A1%E5%9E%8B">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç”Ÿæˆå¸¦æœ‰ç›¸åº” queries å’Œ mutations çš„ <code>Choice</code> æ¨¡å‹ã€‚<a class="anchor" href="#%E6%8E%A5%E4%B8%8B%E6%9D%A5%E6%88%91%E4%BB%AC%E5%B0%86%E7%94%9F%E6%88%90%E5%B8%A6%E6%9C%89%E7%9B%B8%E5%BA%94-queries-%E5%92%8C-mutations-%E7%9A%84-choice-%E6%A8%A1%E5%9E%8B">Â§</a></h4>\n<p>è¿™æ¬¡æˆ‘ä»¬æ­é… <code>resource</code> ç±»å‹ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦ä¸º <code>Choice</code> æ¨¡å‹ç”Ÿæˆé¡µé¢ï¼š</p>\n<pre class="language-bash"><code class="language-bash">blitz generate resource choice text votes:int:default<span class="token operator">=</span><span class="token number">0</span> belongsTo:question\n</code></pre>\n<p>åŒæ ·ï¼Œåœ¨ç³»ç»Ÿæç¤ºä½ è¿›è¡Œè¿ç§»æ—¶ï¼ŒæŒ‰ <strong>Enter</strong> åè¾“å…¥è¿ç§»çš„åç§°ã€‚</p>\n<pre class="language-bash"><code class="language-bash">CREATE    app/choices/queries/getChoice.ts\nCREATE    app/choices/queries/getChoices.ts\nCREATE    app/choices/mutations/createChoice.ts\nCREATE    app/choices/mutations/deleteChoice.ts\nCREATE    app/choices/mutations/updateChoice.ts\n\nâœ” Model <span class="token keyword">for</span> <span class="token string">\'choice\'</span> created <span class="token keyword">in</span> schema.prisma:\n\n<span class="token operator">></span> model Choice <span class="token punctuation">{</span>\n<span class="token operator">></span>   <span class="token function">id</span>         Int      @default<span class="token punctuation">(</span>autoincrement<span class="token punctuation">(</span><span class="token punctuation">))</span> @id\n<span class="token operator">></span>   createdAt  DateTime @default<span class="token punctuation">(</span>now<span class="token punctuation">(</span><span class="token punctuation">))</span>\n<span class="token operator">></span>   updatedAt  DateTime @updatedAt\n<span class="token operator">></span>   text       String\n<span class="token operator">></span>   votes      Int      @default<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>\n<span class="token operator">></span>   question   Question @relation<span class="token punctuation">(</span>fields: <span class="token punctuation">[</span>questionId<span class="token punctuation">]</span>, references: <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token operator">></span>   questionId Int\n<span class="token operator">></span> <span class="token punctuation">}</span>\n\n? Run <span class="token string">\'prisma migrate dev\'</span> to update your database? <span class="token punctuation">(</span>Y/n<span class="token punctuation">)</span> â€º <span class="token boolean">true</span>\n</code></pre>\n<h4 id="%E6%9C%80%E5%90%8E%E8%AE%A9%E6%88%91%E4%BB%AC%E6%9B%B4%E6%96%B0-question-%E6%A8%A1%E5%9E%8B%E4%BB%A5%E5%85%B3%E8%81%94%E5%88%B0-choice-%E4%B8%8A">æœ€åï¼Œè®©æˆ‘ä»¬æ›´æ–° <code>Question</code> æ¨¡å‹ä»¥å…³è”åˆ° <code>Choice</code> ä¸Šã€‚<a class="anchor" href="#%E6%9C%80%E5%90%8E%E8%AE%A9%E6%88%91%E4%BB%AC%E6%9B%B4%E6%96%B0-question-%E6%A8%A1%E5%9E%8B%E4%BB%A5%E5%85%B3%E8%81%94%E5%88%B0-choice-%E4%B8%8A">Â§</a></h4>\n<p>æ‰“å¼€ <code>db/schema.prisma</code> å¹¶åœ¨ <code>Question</code> æ¨¡å‹ä¸­æ·»åŠ  <code>choices Choice[]</code>ã€‚</p>\n<pre class="language-diff"><code class="language-diff">model Question {\n<span class="token unchanged"><span class="token prefix unchanged"> </span> id        Int      @id @default(autoincrement())\n<span class="token prefix unchanged"> </span> createdAt DateTime @default(now())\n<span class="token prefix unchanged"> </span> updatedAt DateTime @updatedAt\n<span class="token prefix unchanged"> </span> text      String\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span> choices   Choice[]\n</span>}\n</code></pre>\n<p>ç„¶åè¿è¡Œ <code>blitz prisma generate</code> æ¥æ›´æ–° prisma å®¢æˆ·ç«¯ä»¥åŒæ­¥ schema çš„æ›´æ”¹ã€‚è¿™é‡Œä¸æ¶‰åŠæ•°æ®åº“è¿ç§»ï¼Œå› ä¸ºæ•°æ®åº“ä¸­æ²¡æœ‰å®é™…å­—æ®µæ·»åŠ åˆ° <code>Question</code> æ¨¡å‹ä¸­ã€‚</p>\n<h3 id="%E8%AE%BF%E9%97%AE-prisma-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%A2%E6%88%B7%E7%AB%AF">è®¿é—® Prisma æ•°æ®åº“å®¢æˆ·ç«¯<a class="anchor" href="#%E8%AE%BF%E9%97%AE-prisma-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%A2%E6%88%B7%E7%AB%AF">Â§</a></h3>\n<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬è·³è¿› Blitz äº¤äº’å¼ Shell ä¸­ï¼Œå¹¶ä½¿ç”¨ Blitz ä¸ºä½ æä¾›çš„ Primsa æ•°æ®åº“å®¢æˆ·ç«¯ã€‚è¦å¯åŠ¨ Blitz æ§åˆ¶å°ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>\n<pre class="language-bash"><code class="language-bash">blitz console\n</code></pre>\n<p>ä¸€æ—¦ä½ è¿›å…¥æ§åˆ¶å°åï¼Œæµè§ˆæ•°æ®åº“å®¢æˆ·ç«¯ï¼š</p>\n<pre class="language-bash"><code class="language-bash"><span class="token comment"># No questions are in the system yet.</span>\nâš¡ <span class="token operator">></span> await db.question.findMany<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">[</span><span class="token punctuation">]</span>\n\n<span class="token comment"># Create a new Question:</span>\nâš¡ <span class="token operator">></span> <span class="token builtin class-name">let</span> q <span class="token operator">=</span> await db.question.create<span class="token punctuation">(</span><span class="token punctuation">{</span>data: <span class="token punctuation">{</span>text: <span class="token string">"What\'s new?"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\nundefined\n\n<span class="token comment"># See the entire object:</span>\nâš¡ <span class="token operator">></span> q\n<span class="token punctuation">{</span>\n  id: <span class="token number">1</span>,\n  createdAt: <span class="token number">2020</span>-06-15T15:06:14.959Z,\n  updatedAt: <span class="token number">2020</span>-06-15T15:06:14.959Z,\n  text: <span class="token string">"What\'s new?"</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment"># Or, access individual values on the object:</span>\nâš¡ <span class="token operator">></span> q.text\n<span class="token string">"What\'s new?"</span>\n\n<span class="token comment"># Change values by using the update function:</span>\nâš¡ <span class="token operator">></span> q <span class="token operator">=</span> await db.question.update<span class="token punctuation">(</span><span class="token punctuation">{</span>where: <span class="token punctuation">{</span>id: <span class="token number">1</span><span class="token punctuation">}</span>, data: <span class="token punctuation">{</span>text: <span class="token string">"What\'s up?"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n  id: <span class="token number">1</span>,\n  createdAt: <span class="token number">2020</span>-06-15T15:06:14.959Z,\n  updatedAt: <span class="token number">2020</span>-06-15T15:13:17.394Z,\n  text: <span class="token string">"What\'s up?"</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment"># db.question.findMany() now displays all the questions in the database:</span>\nâš¡ <span class="token operator">></span> await db.question.findMany<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">[</span>\n  <span class="token punctuation">{</span>\n    id: <span class="token number">1</span>,\n    createdAt: <span class="token number">2020</span>-06-15T15:06:14.959Z,\n    updatedAt: <span class="token number">2020</span>-06-15T15:13:17.394Z,\n    text: <span class="token string">"What\'s up?"</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">]</span>\n</code></pre>\n<h3 id="%E6%9B%B4%E6%96%B0%E6%A8%A1%E5%9E%8B%E5%B1%9E%E6%80%A7%E7%94%9F%E6%88%90%E7%9A%84%E4%BB%A3%E7%A0%81">æ›´æ–°æ¨¡å‹å±æ€§ç”Ÿæˆçš„ä»£ç <a class="anchor" href="#%E6%9B%B4%E6%96%B0%E6%A8%A1%E5%9E%8B%E5%B1%9E%E6%80%A7%E7%94%9F%E6%88%90%E7%9A%84%E4%BB%A3%E7%A0%81">Â§</a></h3>\n<blockquote>\n<p>åœ¨å†æ¬¡è¿è¡Œè¯¥åº”ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€äº›å·²ç”Ÿæˆçš„ä»£ç ã€‚æœ€ç»ˆè¿™äº›ä¿®å¤è¿‡ç¨‹å°†ä¸å†éœ€è¦â€”â€”ä½†å°±ç›®å‰è€Œè¨€ï¼Œæˆ‘ä»¬éœ€è¦è§£å†³ç»“æœæœªè§£å†³çš„é—®é¢˜ã€‚</p>\n</blockquote>\n<p>è‡ªåŠ¨ç”Ÿæˆçš„é¡µé¢ï¼Œå½“å‰å¹¶æœªä½¿ç”¨ä½ åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­å®šä¹‰çš„å®é™…æ¨¡å‹çš„å±æ€§ã€‚ä»¥åä¼šæ”¯æŒï¼Œä½†ç°åœ¨ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ä¿®å¤ç”Ÿæˆçš„é¡µé¢ã€‚</p>\n<h4 id="question-%E9%A1%B5%E9%9D%A2">Question é¡µé¢<a class="anchor" href="#question-%E9%A1%B5%E9%9D%A2">Â§</a></h4>\n<p>è¿›å…¥ <code>app/pages/questions/index.tsx</code>. è¯·æ³¨æ„åˆ°ä¸€ä¸ª <code>QuestionsList</code> ç»„ä»¶å·²ç»ä¸ºä½ ç”Ÿæˆäº†ï¼š</p>\n<pre class="language-jsx"><code class="language-jsx"><span class="token comment">// app/pages/questions/index.tsx</span>\n\n<span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function"><span class="token maybe-class-name">QuestionsList</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token known-class-name class-name">Number</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token property-access">query</span><span class="token punctuation">.</span><span class="token property-access">page</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>questions<span class="token punctuation">,</span> hasMore<span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">usePaginatedQuery</span><span class="token punctuation">(</span>getQuestions<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n    orderBy<span class="token operator">:</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token string">"asc"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n    skip<span class="token operator">:</span> <span class="token constant">ITEMS_PER_PAGE</span> <span class="token operator">*</span> page<span class="token punctuation">,</span>\n    take<span class="token operator">:</span> <span class="token constant">ITEMS_PER_PAGE</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n  <span class="token keyword">const</span> <span class="token function-variable function">goToPreviousPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> router<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>query<span class="token operator">:</span> <span class="token punctuation">{</span>page<span class="token operator">:</span> page <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> <span class="token function-variable function">goToNextPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> router<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>query<span class="token operator">:</span> <span class="token punctuation">{</span>page<span class="token operator">:</span> page <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token punctuation">{</span>questions<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">question</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>question<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">href</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/questions/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>question<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>question<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token plain-text">\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">\n\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>page <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>goToPreviousPage<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        Previous\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token operator">!</span>hasMore<span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>goToNextPage<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        Next\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<p>ä¸è¿‡ç›®å‰è·‘ä¸é€šçš„ï¼è¯·è®°ä½æˆ‘ä»¬åˆ›å»ºçš„ <code>Question</code> æ¨¡å‹ä¸Šé¢æ²¡æœ‰ä»»ä½•â€œnameâ€å­—æ®µã€‚\nè¦è§£å†³æ­¤é—®é¢˜ï¼Œè¯·æ›¿æ¢ <code>question.name</code> ä¸º <code>question.text</code>ã€‚</p>\n<pre class="language-diff"><code class="language-diff">// app/pages/questions/index.tsx\n\nexport const QuestionsList = () => {\n<span class="token unchanged"><span class="token prefix unchanged"> </span> const router = useRouter()\n<span class="token prefix unchanged"> </span> const page = Number(router.query.page) || 0\n<span class="token prefix unchanged"> </span> const [{questions, hasMore}] = usePaginatedQuery(getQuestions, {\n<span class="token prefix unchanged"> </span>   orderBy: {id: "asc"},\n<span class="token prefix unchanged"> </span>   skip: ITEMS_PER_PAGE * page,\n<span class="token prefix unchanged"> </span>   take: ITEMS_PER_PAGE,\n<span class="token prefix unchanged"> </span> })\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span> const goToPreviousPage = () => router.push({query: {page: page - 1}})\n<span class="token prefix unchanged"> </span> const goToNextPage = () => router.push({query: {page: page + 1}})\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span> return (\n<span class="token prefix unchanged"> </span>   &lt;div>\n<span class="token prefix unchanged"> </span>     &lt;ul>\n<span class="token prefix unchanged"> </span>       {questions.map((question) => (\n<span class="token prefix unchanged"> </span>         &lt;li key={question.id}>\n<span class="token prefix unchanged"> </span>           &lt;Link href={`/questions/${question.id}`}>\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>              &lt;a>{question.name}&lt;/a>\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>              &lt;a>{question.text}&lt;/a>\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span>           &lt;/Link>\n<span class="token prefix unchanged"> </span>         &lt;/li>\n<span class="token prefix unchanged"> </span>       ))}\n<span class="token prefix unchanged"> </span>     &lt;/ul>\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>     &lt;button disabled={page === 0} onClick={goToPreviousPage}>\n<span class="token prefix unchanged"> </span>       Previous\n<span class="token prefix unchanged"> </span>     &lt;/button>\n<span class="token prefix unchanged"> </span>     &lt;button disabled={!hasMore} onClick={goToNextPage}>\n<span class="token prefix unchanged"> </span>       Next\n<span class="token prefix unchanged"> </span>     &lt;/button>\n<span class="token prefix unchanged"> </span>   &lt;/div>\n<span class="token prefix unchanged"> </span> )\n</span>}\n</code></pre>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç±»ä¼¼çš„ä¿®å¤æ–¹æ³•åº”ç”¨äº <code>app/questions/components/QuestionForm.tsx</code> ä¸­ã€‚åœ¨è¡¨å•æäº¤ä¸­ï¼Œå°† <code>LabeledTextField</code> ä¸­ <code>name</code> å˜ä¸º <code>text</code>ã€‚</p>\n<pre class="language-diff"><code class="language-diff">export function QuestionForm&lt;S extends z.ZodType&lt;any, any>>(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> props: FormProps&lt;S>,\n</span>) {\n<span class="token unchanged"><span class="token prefix unchanged"> </span> return (\n<span class="token prefix unchanged"> </span>   &lt;Form&lt;S> {...props}>\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>     &lt;LabeledTextField name="name" label="Name" placeholder="Name" />\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>     &lt;LabeledTextField name="text" label="Text" placeholder="Text" />\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span>   &lt;/Form>\n<span class="token prefix unchanged"> </span> )\n</span>}\n</code></pre>\n<h4 id="createquestion-mutation"><code>createQuestion</code> mutation<a class="anchor" href="#createquestion-mutation">Â§</a></h4>\n<p>åœ¨ <code>app/questions/mutations/createQuestion.ts</code> ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–° <code>CreateQuestion</code> zod éªŒè¯æ¨¡å¼ï¼Œä½¿ç”¨ <code>text</code> è€Œä¸æ˜¯ <code>name</code>ã€‚</p>\n<pre class="language-diff"><code class="language-diff">// app/questions/mutations/createQuestion.ts\n\nconst CreateQuestion = z\n<span class="token unchanged"><span class="token prefix unchanged"> </span> .object({\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   name: z.string(),\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   text: z.string(),\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span> })\n<span class="token prefix unchanged"> </span> .nonstrict()\n</span>// ...\n</code></pre>\n<h4 id="updatequestion-mutation"><code>updateQuestion</code> mutation<a class="anchor" href="#updatequestion-mutation">Â§</a></h4>\n<p>åœ¨ <code>app/questions/mutations/updateQuestion.ts</code> ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–° <code>UpdateQuestion</code> zod éªŒè¯æ¨¡å¼ï¼Œä½¿ç”¨ <code>text</code> è€Œä¸æ˜¯ <code>name</code>ã€‚</p>\n<pre class="language-diff"><code class="language-diff">// app/questions/mutations/updateQuestion.ts\n\nconst UpdateQuestion = z\n<span class="token unchanged"><span class="token prefix unchanged"> </span> .object({\n<span class="token prefix unchanged"> </span>   id: z.number(),\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   name: z.string(),\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   text: z.string(),\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span> })\n<span class="token prefix unchanged"> </span> .nonstrict()\n</span>// ...\n</code></pre>\n<h4 id="deletequestion-mutation"><code>deleteQuestion</code> mutation<a class="anchor" href="#deletequestion-mutation">Â§</a></h4>\n<p>Prisma å°šä¸æ”¯æŒâ€œçº§è”åˆ é™¤â€ã€‚åœ¨æœ¬æ•™ç¨‹çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™æ„å‘³ç€å®ƒåœ¨åˆ é™¤ <code>Question</code> æ—¶ä¸ä¼šåˆ é™¤ç›¸å…³çš„ <code>Choice</code>æ•°æ®ã€‚æˆ‘ä»¬éœ€è¦ä¸´æ—¶æ”¹åŠ¨ç”Ÿæˆçš„ <code>deleteQuestion</code> mutationï¼Œä»¥ä¾¿æ‰‹åŠ¨åšè¿™ä»¶äº‹ã€‚åœ¨æ–‡æœ¬ç¼–è¾‘æ¡†ä¸­æ‰“å¼€ <code>app/questions/mutations/deleteQuestion.ts</code> å¹¶å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°å‡½æ•°ä¸»ä½“çš„é¡¶\néƒ¨ã€‚</p>\n<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">await</span> db<span class="token punctuation">.</span>choice<span class="token punctuation">.</span><span class="token function">deleteMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span>where<span class="token operator">:</span> <span class="token punctuation">{</span>questionId<span class="token operator">:</span> id<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre>\n<p>æœ€ç»ˆçš„æ•ˆæœåº”è¯¥ä¸ºï¼š</p>\n<pre class="language-diff"><code class="language-diff">// app/questions/mutations/deleteQuestion.ts\n\nexport default resolver.pipe(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> resolver.zod(DeleteQuestion),\n<span class="token prefix unchanged"> </span> resolver.authorize(),\n<span class="token prefix unchanged"> </span> async ({id}) => {\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   await db.choice.deleteMany({where: {questionId: id}})\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span>   const question = await db.question.deleteMany({where: {id}})\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>   return question\n<span class="token prefix unchanged"> </span> },\n</span>)\n</code></pre>\n<p>ç°åœ¨ï¼Œæ­¤ mutation å°†åœ¨åˆ é™¤é—®é¢˜æœ¬èº«ä¹‹å‰ï¼Œåˆ é™¤ä¸é—®é¢˜ç›¸å…³çš„é€‰æ‹©ã€‚</p>\n<h4 id="%E7%8E%B0%E5%9C%A8%E5%B0%9D%E8%AF%95%E5%88%9B%E5%BB%BA%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4%E9%97%AE%E9%A2%98">ç°åœ¨å°è¯•åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤é—®é¢˜<a class="anchor" href="#%E7%8E%B0%E5%9C%A8%E5%B0%9D%E8%AF%95%E5%88%9B%E5%BB%BA%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4%E9%97%AE%E9%A2%98">Â§</a></h4>\n<p>å¤ªæ£’äº†ï¼ç°åœ¨ç¡®ä¿ä½ çš„ç¨‹åºæ­£å¸¸è¿è¡Œã€‚å¦åˆ™åœ¨ä½ çš„ç»ˆç«¯ä¸­æ‰§è¡Œ <code>blitz dev</code>ï¼Œç„¶åè®¿é—® <code>localhost:3000/questions</code>ã€‚å°è¯•åˆ›å»ºé—®é¢˜å¹¶ç¼–è¾‘ã€åˆ é™¤å®ƒä»¬ã€‚</p>\n<h3 id="%E5%9C%A8%E9%97%AE%E9%A2%98%E8%A1%A8%E6%A0%BC%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%80%89%E6%8B%A9%E9%A1%B9">åœ¨é—®é¢˜è¡¨æ ¼ä¸­æ·»åŠ é€‰æ‹©é¡¹<a class="anchor" href="#%E5%9C%A8%E9%97%AE%E9%A2%98%E8%A1%A8%E6%A0%BC%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%80%89%E6%8B%A9%E9%A1%B9">Â§</a></h3>\n<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ åšçš„å¾ˆæ£’ï¼æˆ‘ä»¬è¦åšçš„ä¸‹ä¸€ä»¶äº‹æ˜¯åœ¨æˆ‘ä»¬çš„é—®é¢˜ä¸­æ·»åŠ é€‰æ‹©ã€‚åœ¨ä½ çš„ç¼–è¾‘å™¨ä¸­æ‰“å¼€ <code>app/questions/components/QuestionForm.tsx</code>ã€‚</p>\n<p>æ·»åŠ å¦å¤–ä¸‰ä¸ª <code>&lt;LabeledTextField&gt;</code> ç»„ä»¶ä½œä¸ºé€‰æ‹©ã€‚</p>\n<pre class="language-diff"><code class="language-diff">export function QuestionForm&lt;S extends z.ZodType&lt;any, any>>(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> props: FormProps&lt;S>,\n</span>) {\n<span class="token unchanged"><span class="token prefix unchanged"> </span> return (\n<span class="token prefix unchanged"> </span>   &lt;Form&lt;S> {...props}>\n<span class="token prefix unchanged"> </span>     &lt;LabeledTextField name="text" label="Text" placeholder="Text" />\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>     &lt;LabeledTextField name="choices.0.text" label="Choice 1" />\n<span class="token prefix inserted">+</span>     &lt;LabeledTextField name="choices.1.text" label="Choice 2" />\n<span class="token prefix inserted">+</span>     &lt;LabeledTextField name="choices.2.text" label="Choice 3" />\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span>   &lt;/Form>\n<span class="token prefix unchanged"> </span> )\n</span>}\n</code></pre>\n<p>ç°åœ¨æ‰“å¼€ <code>app/pages/questions/new.tsx</code> å¹¶è®¾ç½® <code>initialValues</code> ä¸ºå¦‚ä¸‹ï¼š</p>\n<pre class="language-diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span>     &lt;QuestionForm\n<span class="token prefix unchanged"> </span>       submitText="Create Question"\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>       // initialValues={{ }}\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>       initialValues={{choices: []}}\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span>       onSubmit={async (values) => {\n<span class="token prefix unchanged"> </span>         try {\n<span class="token prefix unchanged"> </span>           const question = await createQuestionMutation(values)\n<span class="token prefix unchanged"> </span>           router.push(`/questions/${question.id}`)\n<span class="token prefix unchanged"> </span>         } catch (error) {\n<span class="token prefix unchanged"> </span>           console.error(error)\n<span class="token prefix unchanged"> </span>           return {\n<span class="token prefix unchanged"> </span>             [FORM_ERROR]: error.toString(),\n<span class="token prefix unchanged"> </span>           }\n<span class="token prefix unchanged"> </span>         }\n<span class="token prefix unchanged"> </span>       }}\n<span class="token prefix unchanged"> </span>     />\n</span></code></pre>\n<p>æ¥ä¸‹æ¥æ‰“å¼€ <code>app/questions/mutations/createQuestion.ts</code> å¹¶æ›´æ–° zod æ¨¡å¼ï¼Œæ¥è®© mutation æ¥æ”¶ choice æ•°æ®ã€‚è€Œä¸”æˆ‘ä»¬è¿˜éœ€è¦æ›´æ–° <code>db.question.create</code> è°ƒç”¨ï¼Œä»¥ä¾¿ choice ä¹Ÿå¯ä»¥è¢«åˆ›å»ºã€‚</p>\n<pre class="language-diff"><code class="language-diff">// app/questions/mutations/createQuestion.ts\n\nconst CreateQuestion = z\n<span class="token unchanged"><span class="token prefix unchanged"> </span> .object({\n<span class="token prefix unchanged"> </span>   text: z.string(),\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   choices: z.array(z.object({text: z.string()})),\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span> })\n<span class="token prefix unchanged"> </span> .nonstrict()\n</span>\nexport default resolver.pipe(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> resolver.zod(CreateQuestion),\n<span class="token prefix unchanged"> </span> resolver.authorize(),\n<span class="token prefix unchanged"> </span> async (input) => {\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   const question = await db.question.create({data: input})\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   const question = await db.question.create({\n<span class="token prefix inserted">+</span>     data: {\n<span class="token prefix inserted">+</span>       ...input,\n<span class="token prefix inserted">+</span>       choices: {create: input.choices},\n<span class="token prefix inserted">+</span>     },\n<span class="token prefix inserted">+</span>   })\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>   return question\n<span class="token prefix unchanged"> </span> },\n</span>)\n</code></pre>\n<h4 id="%E8%AF%95%E8%AF%95%E7%9C%8B">è¯•è¯•çœ‹<a class="anchor" href="#%E8%AF%95%E8%AF%95%E7%9C%8B">Â§</a></h4>\n<p>ç°åœ¨ä½ å¯ä»¥è½¬åˆ° <code>localhost:3000/questions/new</code> å¹¶åˆ›å»ºä¸€ä¸ªå¸¦æœ‰é€‰æ‹©çš„æ–°é—®é¢˜ï¼</p>\n<h3 id="%E5%88%97%E5%87%BA%E9%80%89%E6%8B%A9">åˆ—å‡ºé€‰æ‹©<a class="anchor" href="#%E5%88%97%E5%87%BA%E9%80%89%E6%8B%A9">Â§</a></h3>\n<p>è¯¥è½»æ¾ä¸€ä¸‹äº†ã€‚è¿”å›æµè§ˆå™¨ä¸­çš„ <code>localhost:3000/questions</code> å¹¶æŸ¥çœ‹ä½ åˆ›å»ºçš„æ‰€æœ‰é—®é¢˜ã€‚è®©æˆ‘ä»¬åœ¨è¿™äº›é—®é¢˜ä¸‹åˆ—å‡ºç›¸å…³çš„é€‰æ‹©å¦‚ä½•ï¼Ÿé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰é—®é¢˜æŸ¥è¯¢å‡½æ•°ã€‚åœ¨ Prisma ä¸­ï¼Œä½ éœ€è¦æ‰‹åŠ¨è®©å®¢æˆ·ç«¯çŸ¥é“ä½ éœ€è¦æŸ¥è¯¢çš„åµŒå¥—å…³ç³»ï¼Œå°†ä½ çš„ <code>getQuestion.ts</code> å’Œ <code>getQuestions.ts</code> æ–‡ä»¶æ›´æ”¹ä¸ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre class="language-diff"><code class="language-diff">// app/questions/queries/getQuestion.ts\n\nconst GetQuestion = z.object({\n<span class="token unchanged"><span class="token prefix unchanged"> </span> // This accepts type of undefined, but is required at runtime\n<span class="token prefix unchanged"> </span> id: z.number().optional().refine(Boolean, "Required"),\n</span>})\n\nexport default resolver.pipe(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> resolver.zod(GetQuestion),\n<span class="token prefix unchanged"> </span> resolver.authorize(),\n<span class="token prefix unchanged"> </span> async ({id}) => {\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   const question = await db.question.findFirst({where: {id}})\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   const question = await db.question.findFirst({\n<span class="token prefix inserted">+</span>     where: {id},\n<span class="token prefix inserted">+</span>     include: {choices: true},\n<span class="token prefix inserted">+</span>   })\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>   if (!question) throw new NotFoundError()\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>   return question\n<span class="token prefix unchanged"> </span> },\n</span>)\n</code></pre>\n<pre class="language-diff"><code class="language-diff">// app/questions/queries/getQuestions.ts\n\ninterface GetQuestionsInput\n<span class="token unchanged"><span class="token prefix unchanged"> </span> extends Pick&lt;\n<span class="token prefix unchanged"> </span>   Prisma.QuestionFindManyArgs,\n<span class="token prefix unchanged"> </span>   "where" | "orderBy" | "skip" | "take"\n<span class="token prefix unchanged"> </span> > {}\n</span>\nexport default resolver.pipe(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> resolver.authorize(),\n<span class="token prefix unchanged"> </span> async ({where, orderBy, skip = 0, take = 100}: GetQuestionsInput) => {\n<span class="token prefix unchanged"> </span>   const {items: questions, hasMore, nextPage, count} = await paginate({\n<span class="token prefix unchanged"> </span>     skip,\n<span class="token prefix unchanged"> </span>     take,\n<span class="token prefix unchanged"> </span>     count: () => db.question.count({where}),\n<span class="token prefix unchanged"> </span>     query: (paginateArgs) =>\n<span class="token prefix unchanged"> </span>       db.question.findMany({\n<span class="token prefix unchanged"> </span>         ...paginateArgs,\n<span class="token prefix unchanged"> </span>         where,\n<span class="token prefix unchanged"> </span>         orderBy,\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>         include: {choices: true},\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span>       }),\n<span class="token prefix unchanged"> </span>   })\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>   return {\n<span class="token prefix unchanged"> </span>     questions,\n<span class="token prefix unchanged"> </span>     nextPage,\n<span class="token prefix unchanged"> </span>     hasMore,\n<span class="token prefix unchanged"> </span>     count,\n<span class="token prefix unchanged"> </span>   }\n<span class="token prefix unchanged"> </span> },\n</span>)\n</code></pre>\n<p>ç°åœ¨åœ¨æµè§ˆå™¨ä¸­è·³å›æˆ‘ä»¬ä¸»è¦çš„ Question é¡µé¢ (<code>app/pages/questions/index.tsx</code>)ï¼Œæˆ‘ä»¬å¯ä»¥åˆ—å‡ºæ¯ä¸ªé—®é¢˜çš„é€‰æ‹©ã€‚å¹¶å°†æ­¤ä»£ç æ·»åŠ åˆ°æˆ‘ä»¬ <code>QuestionsList</code> ä¸­çš„ <code>Link</code> ä¸‹ï¼š</p>\n<pre class="language-diff"><code class="language-diff">// app/pages/questions/index.tsx\n\n// ...\n{\n<span class="token unchanged"><span class="token prefix unchanged"> </span> questions.map((question) => (\n<span class="token prefix unchanged"> </span>   &lt;li key={question.id}>\n<span class="token prefix unchanged"> </span>     &lt;Link href={`/questions/${question.id}`}>\n<span class="token prefix unchanged"> </span>       &lt;a>{question.text}&lt;/a>\n<span class="token prefix unchanged"> </span>     &lt;/Link>\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>     &lt;ul>\n<span class="token prefix inserted">+</span>       {question.choices.map((choice) => (\n<span class="token prefix inserted">+</span>         &lt;li key={choice.id}>\n<span class="token prefix inserted">+</span>           {choice.text} - {choice.votes} votes\n<span class="token prefix inserted">+</span>         &lt;/li>\n<span class="token prefix inserted">+</span>       ))}\n<span class="token prefix inserted">+</span>     &lt;/ul>\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span>   &lt;/li>\n<span class="token prefix unchanged"> </span> ))\n</span>}\n// ...\n</code></pre>\n<p>ç°åœ¨åœ¨æµè§ˆå™¨ä¸­è®¿é—® <code>/questions</code> è·¯ç”±ã€‚<strong>ç¥å¥‡å§ï¼</strong></p>\n<h3 id="%E8%AE%A9%E6%88%91%E4%BB%AC%E5%85%81%E8%AE%B8%E7%94%A8%E6%88%B7%E5%AF%B9%E8%BF%99%E4%BA%9B%E9%97%AE%E9%A2%98%E6%8A%95%E7%A5%A8">è®©æˆ‘ä»¬å…è®¸ç”¨æˆ·å¯¹è¿™äº›é—®é¢˜æŠ•ç¥¨ï¼<a class="anchor" href="#%E8%AE%A9%E6%88%91%E4%BB%AC%E5%85%81%E8%AE%B8%E7%94%A8%E6%88%B7%E5%AF%B9%E8%BF%99%E4%BA%9B%E9%97%AE%E9%A2%98%E6%8A%95%E7%A5%A8">Â§</a></h3>\n<p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <code>app/pages/questions/[questionId].tsx</code>ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†å¯¹è¯¥é¡µé¢è¿›è¡Œä¸€äº›æ”¹é€ ã€‚</p>\n<ol>\n<li>æ›¿æ¢ <code>&lt;h1&gt;Question {question.id}&lt;/h1&gt;</code> ä¸º <code>&lt;h1&gt;{question.text}&lt;/h1&gt;</code>.</li>\n<li>åˆ é™¤ <code>pre</code> å…ƒç´ ï¼Œå¹¶å°†å¦‚ä¸‹å¤åˆ¶åˆ°ä¹‹å‰å†™çš„é€‰æ‹©åˆ—è¡¨ä¸­ï¼š</li>\n</ol>\n<pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">\n  </span><span class="token punctuation">{</span>question<span class="token punctuation">.</span><span class="token property-access">choices</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">choice</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">}</span><span class="token plain-text"> - </span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">votes</span><span class="token punctuation">}</span><span class="token plain-text"> votes\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">\n</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>\n</code></pre>\n<p>å¦‚æœè¿”å›æµè§ˆå™¨ï¼Œé¡µé¢ç›®å‰çœ‹èµ·æ¥åƒè¿™æ ·ï¼</p>\n<p><img src="https://cdn.nlark.com/yuque/0/2021/png/86548/1616475118256-6e625fe9-db7f-44ec-9a07-68a3eced32c7.png#align=left&amp;display=inline&amp;height=285&amp;margin=%5Bobject%20Object%5D&amp;originHeight=570&amp;originWidth=1134&amp;size=0&amp;status=done&amp;style=none&amp;width=567" alt=""></p>\n<h3 id="%E7%8E%B0%E5%9C%A8%E6%98%AF%E6%97%B6%E5%80%99%E6%9D%A5%E5%A2%9E%E5%8A%A0%E6%8A%95%E7%A5%A8%E5%8A%9F%E8%83%BD">ç°åœ¨æ˜¯æ—¶å€™æ¥å¢åŠ æŠ•ç¥¨åŠŸèƒ½ï¼<a class="anchor" href="#%E7%8E%B0%E5%9C%A8%E6%98%AF%E6%97%B6%E5%80%99%E6%9D%A5%E5%A2%9E%E5%8A%A0%E6%8A%95%E7%A5%A8%E5%8A%9F%E8%83%BD">Â§</a></h3>\n<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ‰“å¼€ <code>app/choices/mutations/updateChoice.ts</code>ï¼Œæ›´æ–° zod æ¨¡å¼ï¼Œæ·»åŠ æ–°å¢æŠ•ç¥¨åŠŸèƒ½ã€‚</p>\n<pre class="language-diff"><code class="language-diff">const UpdateChoice = z\n<span class="token unchanged"><span class="token prefix unchanged"> </span> .object({\n<span class="token prefix unchanged"> </span>   id: z.number(),\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   name: z.string(),\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span> })\n<span class="token prefix unchanged"> </span> .nonstrict()\n</span>\nexport default resolver.pipe(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> resolver.zod(UpdateChoice),\n<span class="token prefix unchanged"> </span> resolver.authorize(),\n<span class="token prefix unchanged"> </span> async ({id, ...data}) => {\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   const choice = await db.choice.update({where: {id}, data})\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   const choice = await db.choice.update({\n<span class="token prefix inserted">+</span>     where: {id},\n<span class="token prefix inserted">+</span>     data: {votes: {increment: 1}},\n<span class="token prefix inserted">+</span>   })\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>   return choice\n<span class="token prefix unchanged"> </span> },\n</span>)\n</code></pre>\n<p>è¿”å›åˆ° <code>app/pages/questions/[questionId].tsx</code> ä¸­è¿›è¡Œå¦‚ä¸‹æ›´æ”¹ï¼š</p>\n<p>åœ¨æˆ‘ä»¬çš„ <code>li</code> ä¸­ï¼Œæ–°å¢ä¸€ä¸ªå¦‚ä¸‹çš„ <code>button</code>ï¼š</p>\n<pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n  </span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">}</span><span class="token plain-text"> - </span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">votes</span><span class="token punctuation">}</span><span class="token plain-text"> votes\n  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">Vote</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\n</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n</code></pre>\n<p>æ¥ä¸‹æ¥ï¼Œå¯¼å…¥æˆ‘ä»¬æ›´æ–°çš„ <code>updateChoice</code> mutationï¼Œå¹¶åœ¨é¡µé¢ä¸­åˆ›å»º <code>handleVote</code> å‡½æ•°ã€‚</p>\n<pre class="language-diff"><code class="language-diff">// app/pages/questions/[questionId].tsx\n<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>import updateChoice from "app/choices/mutations/updateChoice"\n</span>\n//...\n\nexport const Question = () => {\n<span class="token unchanged"><span class="token prefix unchanged"> </span> const router = useRouter()\n<span class="token prefix unchanged"> </span> const questionId = useParam("questionId", "number")\n<span class="token prefix unchanged"> </span> const [deleteQuestionMutation] = useMutation(deleteQuestion)\n<span class="token prefix unchanged"> </span> const [question] = useQuery(getQuestion, {id: questionId})\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span> const [updateChoiceMutation] = useMutation(updateChoice)\n<span class="token prefix inserted">+</span>\n<span class="token prefix inserted">+</span> const handleVote = async (id: number) => {\n<span class="token prefix inserted">+</span>   try {\n<span class="token prefix inserted">+</span>     await updateChoiceMutation({id})\n<span class="token prefix inserted">+</span>     refetch()\n<span class="token prefix inserted">+</span>   } catch (error) {\n<span class="token prefix inserted">+</span>     alert("Error updating choice " + JSON.stringify(error, null, 2))\n<span class="token prefix inserted">+</span>   }\n<span class="token prefix inserted">+</span> }\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span> return (\n</span></code></pre>\n<p>ç„¶åæˆ‘ä»¬éœ€è¦æ›´æ–°é—®é¢˜ç›¸å…³çš„ <code>useQuery</code> è°ƒç”¨ä»¥è¿”å›éœ€è¦åœ¨ <code>handleVote</code> å†…éƒ¨ä½¿ç”¨çš„ <code>refetch</code> å‡½æ•°ã€‚</p>\n<pre class="language-diff"><code class="language-diff">// app/pages/questions/[questionId].tsx\n\n//...\n<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span> const [question] = useQuery(getQuestion, {id: questionId})\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span> const [question, {refetch}] = useQuery(getQuestion, {id: questionId})\n</span>//...\n</code></pre>\n<p>æœ€åï¼Œæˆ‘ä»¬å°†å‘Šè¯‰æ–°çš„ <code>button</code> æ¥æ¡ç”¨è¯¥å‡½æ•°ï¼</p>\n<pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">handleVote</span><span class="token punctuation">(</span>choice<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Vote</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n</code></pre>\n<p>æœ€ç»ˆçš„ <code>Question</code> ç»„ä»¶åº”è¯¥æ˜¯è¿™ä¸ªæ ·å­ï¼š</p>\n<pre class="language-jsx"><code class="language-jsx"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function"><span class="token maybe-class-name">Question</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> questionId <span class="token operator">=</span> <span class="token function">useParam</span><span class="token punctuation">(</span><span class="token string">"questionId"</span><span class="token punctuation">,</span> <span class="token string">"number"</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>deleteQuestionMutation<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useMutation</span><span class="token punctuation">(</span>deleteQuestion<span class="token punctuation">)</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>question<span class="token punctuation">,</span> <span class="token punctuation">{</span>refetch<span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span>getQuestion<span class="token punctuation">,</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> questionId<span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>updateChoiceMutation<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useMutation</span><span class="token punctuation">(</span>updateChoice<span class="token punctuation">)</span>\n\n  <span class="token keyword">const</span> <span class="token function-variable function">handleVote</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>\n      <span class="token keyword control-flow">await</span> <span class="token function">updateChoiceMutation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token punctuation">)</span>\n      <span class="token function">refetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Error updating choice "</span> <span class="token operator">+</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Head</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token plain-text">Question </span><span class="token punctuation">{</span>question<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Head</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>question<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">\n          </span><span class="token punctuation">{</span>question<span class="token punctuation">.</span><span class="token property-access">choices</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">choice</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n              </span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">}</span><span class="token plain-text"> - </span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">votes</span><span class="token punctuation">}</span><span class="token plain-text"> votes\n              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">handleVote</span><span class="token punctuation">(</span>choice<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Vote</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">\n\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">href</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/questions/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>question<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/edit</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">></span></span><span class="token plain-text">Edit</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n\n        &lt;button\n          type="button"\n          onClick=</span><span class="token punctuation">{</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\n            <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">confirm</span><span class="token punctuation">(</span><span class="token string">"This will be deleted"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n              <span class="token keyword control-flow">await</span> <span class="token function">deleteQuestionMutation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">:</span> question<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n              router<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token string">"/questions"</span><span class="token punctuation">)</span>\n            <span class="token punctuation">}</span>\n          <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">\n          style=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token operator">:</span> <span class="token string">"0.5rem"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">\n        >\n          Delete\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<h3 id="%E6%9C%80%E5%90%8E%E8%AE%A9%E6%88%91%E4%BB%AC%E6%94%AF%E6%8C%81%E7%BC%96%E8%BE%91%E6%9F%90%E9%97%AE%E9%A2%98%E4%B8%8B%E7%9A%84%E4%B8%80%E4%B8%AA%E9%80%89%E6%8B%A9">æœ€åï¼Œè®©æˆ‘ä»¬æ”¯æŒç¼–è¾‘æŸé—®é¢˜ä¸‹çš„ä¸€ä¸ªé€‰æ‹©<a class="anchor" href="#%E6%9C%80%E5%90%8E%E8%AE%A9%E6%88%91%E4%BB%AC%E6%94%AF%E6%8C%81%E7%BC%96%E8%BE%91%E6%9F%90%E9%97%AE%E9%A2%98%E4%B8%8B%E7%9A%84%E4%B8%80%E4%B8%AA%E9%80%89%E6%8B%A9">Â§</a></h3>\n<p>å¦‚æœå•å‡»ç°æœ‰é—®é¢˜ä¹‹ä¸€ä¸Šçš„â€œç¼–è¾‘â€æŒ‰é’®ï¼Œä½ å°†çœ‹åˆ°å®ƒä½¿ç”¨ä¸åˆ›å»ºé—®é¢˜ç›¸åŒçš„å½¢å¼ã€‚è‡³\næ­¤ï¼Œè¯¥éƒ¨åˆ†å·²ç»å®Œæˆï¼æˆ‘ä»¬åªéœ€è¦æ›´æ–°æˆ‘ä»¬çš„ mutationã€‚</p>\n<p>æ‰“å¼€ <code>app/questions/mutations/updateQuestion.ts</code> å¹¶è¿›è¡Œå¦‚ä¸‹æ”¹åŠ¨ï¼š</p>\n<pre class="language-diff"><code class="language-diff">// app/questions/mutations/updateQuestion.ts\nimport {resolver} from "blitz"\nimport db from "db"\nimport * as z from "zod"\n\nconst UpdateQuestion = z\n<span class="token unchanged"><span class="token prefix unchanged"> </span> .object({\n<span class="token prefix unchanged"> </span>   id: z.number(),\n<span class="token prefix unchanged"> </span>   text: z.string(),\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   choices: z.array(\n<span class="token prefix inserted">+</span>     z.object({id: z.number().optional(), text: z.string()}).nonstrict(),\n<span class="token prefix inserted">+</span>   ),\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span> })\n<span class="token prefix unchanged"> </span> .nonstrict()\n</span>\nexport default resolver.pipe(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> resolver.zod(UpdateQuestion),\n<span class="token prefix unchanged"> </span> resolver.authorize(),\n<span class="token prefix unchanged"> </span> async ({id, ...data}) => {\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   const question = await db.question.update({where: {id}, data})\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   const question = await db.question.update({\n<span class="token prefix inserted">+</span>     where: {id},\n<span class="token prefix inserted">+</span>     data: {\n<span class="token prefix inserted">+</span>       ...data,\n<span class="token prefix inserted">+</span>       choices: {\n<span class="token prefix inserted">+</span>         upsert: data.choices.map((choice) => ({\n<span class="token prefix inserted">+</span>           // Appears to be a prisma bug,\n<span class="token prefix inserted">+</span>           // because `|| 0` shouldn\'t be needed\n<span class="token prefix inserted">+</span>           where: {id: choice.id || 0},\n<span class="token prefix inserted">+</span>           create: {text: choice.text},\n<span class="token prefix inserted">+</span>           update: {text: choice.text},\n<span class="token prefix inserted">+</span>         })),\n<span class="token prefix inserted">+</span>       },\n<span class="token prefix inserted">+</span>     },\n<span class="token prefix inserted">+</span>   })\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>   return question\n<span class="token prefix unchanged"> </span> },\n</span>)\n</code></pre>\n<p><code>[upsert](https://www.prisma.io/docs/reference/api-reference/prisma-client-reference#upsert)</code> æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ“ä½œï¼Œè¡¨ç¤ºâ€œå¦‚æœå­˜åœ¨æ­¤é¡¹ç›®ï¼Œè¯·å¯¹å…¶è¿›è¡Œæ›´æ–°ã€‚å¦åˆ™åˆ›å»ºå®ƒâ€ã€‚è¿™å¯¹äº\nå½“å‰æƒ…å†µæ˜¯å®Œç¾çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦ç”¨æˆ·åœ¨åˆ›å»ºé—®é¢˜æ—¶åŒæ—¶æ·»åŠ ä¸‰ä¸ªé€‰æ‹©ã€‚æ‰€ä»¥å¦‚æœ\nç”¨æˆ·é€šè¿‡ç¼–è¾‘é—®é¢˜æ·»åŠ å¦ä¸€ä¸ªé€‰æ‹©ï¼Œåˆ™å°†åœ¨æ­¤å¤„åˆ›å»ºå®ƒã€‚</p>\n<h3 id="%E7%BB%93%E5%B0%BE">ç»“å°¾<a class="anchor" href="#%E7%BB%93%E5%B0%BE">Â§</a></h3>\n<p>ğŸ¥³ æ­å–œï¼ä½ åˆ›å»ºäº†è‡ªå·±çš„ Blitz åº”ç”¨ï¼ç¥ä½ ç©å¾—å¼€å¿ƒï¼Œä¹Ÿæ¬¢è¿ä¸ä½ çš„æœ‹å‹åˆ†äº«ã€‚ç°åœ¨ï¼Œä½ å·²ç»å®Œæˆäº†æœ¬æ•™ç¨‹ï¼Œä¸ºä»€ä¹ˆä¸å°è¯•ä½¿ä½ çš„æŠ•ç¥¨åº”ç”¨å˜å¾—æ›´å¥½å‘¢ï¼Ÿä½ å¯ä»¥å°è¯•ï¼š</p>\n<ul>\n<li>æ·»åŠ æ ·å¼ (æç¤º, è¯•è¯• <code>blitz install tailwind</code> æˆ– <code>blitz install chakra-ui</code>)</li>\n<li>æ˜¾ç¤ºæ›´å¤šæœ‰å…³é€‰ç¥¨çš„ç»Ÿè®¡ä¿¡æ¯</li>\n<li>åœ¨ Render æˆ– Vercel ä¸Šå®æ—¶éƒ¨ç½²ã€‚</li>\n</ul>\n<p>å¦‚æœä½ æƒ³ä¸å…¨çƒ Blitz ç¤¾åŒºåˆ†äº«ä½ çš„é¡¹ç›®ï¼Œæ²¡æœ‰æ¯” Discord æ›´å¥½çš„åœ°æ–¹äº†ã€‚</p>\n<p>è®¿é—® <a href="https://discord.blitzjs.com">discord.blitzjs.com</a>ã€‚ç„¶åï¼Œå°†è¿æ¥å‘å¸ƒåˆ° <strong>#built-with-blitz</strong> é¢‘é“æ¥ä¸æ‰€æœ‰äººå…±äº«ï¼</p>\n<h2 id="%E8%AF%91%E8%80%85%E7%BB%93%E8%AF%AD">è¯‘è€…ç»“è¯­<a class="anchor" href="#%E8%AF%91%E8%80%85%E7%BB%93%E8%AF%AD">Â§</a></h2>\n<p>æœ¬æ–‡å†…å®¹å±äº <a href="https://blitzjs.com/docs">Blitz.js å®˜æ–¹æ–‡æ¡£</a> - ç®€ä»‹ç« èŠ‚çš„å‰åŠéƒ¨åˆ†ã€‚æ€»å…±åå››ä¸ªç« èŠ‚ï¼ˆç®€ä»‹ã€ç¤¾åŒºã€åŸºç¡€ã€é¡µé¢ã€è·¯ç”±ã€æƒé™ã€æ•°æ®åº“ã€Queries å’Œ Mutationsã€åç«¯æ¶æ„ã€éƒ¨ç½²ã€é…æ–¹ã€é…ç½®ã€CLI å’Œæ¨¡æ¿ï¼‰ã€‚æœªæ¥ä¸å®šæœŸç¿»è¯‘å…¶ä½™ç« èŠ‚ï¼Œä¹Ÿå¯èƒ½ä¼šåŸåˆ›ä¸€äº›æ–‡ç« ã€‚</p>\n<p>ã€Š<a href="https://github.com/hylerrix/blitzjs-tutorial">Blitz.js + React å…¨æ ˆå¼€å‘æ‰‹å†Œ</a>ã€‹ç³»åˆ—ä¸“æ³¨æ¢ç´¢ Blitz.js + React å…¨æ ˆåº”ç”¨å¼€å‘ï¼ŒåŸæ–‡ç¿»è¯‘å†…å®¹ä¼šåŒæ­¥æ›´æ–°åˆ° <a href="https://github.com/blitz-js/zh-hans.blitzjs.com">Blitz.js ä¸­æ–‡ä»“åº“</a> ä¸Šã€‚æ¬¢è¿ Starã€Watch æˆ–å…³æ³¨å…¬ä¼—å· (@ningowood) æ¥åŠæ—¶æ¥æ”¶æ¶ˆæ¯ã€‚</p>\n<blockquote>\n<p>2021 Â© <a href="https://github.com/hylerrix/blitzjs-tutorial">https://github.com/hylerrix/blitzjs-tutorial</a></p>\n</blockquote>'
        } }),
    'head': React.createElement("link", { href: "/favicon.png", rel: "icon", type: "image/png" }),
    'script': React.createElement(React.Fragment, null,
        React.createElement("script", { src: "https://cdn.pagic.org/react@16.13.1/umd/react.production.min.js" }),
        React.createElement("script", { src: "https://cdn.pagic.org/react-dom@16.13.1/umd/react-dom.production.min.js" }),
        React.createElement("script", { src: "/index.js", type: "module" })),
    'contentTitle': React.createElement("h1", { key: "0" }, "Blitz.js \u5165\u95E8\u6559\u7A0B\uFF1A\u57FA\u4E8E Next.js \u7684\u4E0B\u4E00\u4EE3 React \u5168\u6808\u6846\u67B6"),
    'contentBody': React.createElement("article", { dangerouslySetInnerHTML: {
            __html: '<h2 id="%E8%AF%91%E8%80%85%E5%BA%8F">è¯‘è€…åº<a class="anchor" href="#%E8%AF%91%E8%80%85%E5%BA%8F">Â§</a></h2>\n<p>è‹¦ JS ç”Ÿæ€ä¹…å·²ã€‚åœ¨ 2020 å¹´åï¼Œä¸€ç›´å¾˜å¾Šäºè¯¥ä¸ºè‡ªå·±æ„å»ºæ€æ ·çš„æŠ€æœ¯æ ˆï¼Œè¿Ÿè¿Ÿæ²¡æœ‰å¤ªå¤šè½åœ°æˆæœâ€”â€”åº“å¤ªå¤šäº†ï¼Œä¸€ä¸ªå°åœºæ™¯å°±èƒ½æœ‰å¾ˆå¤šä¸ªè§£å†³æ–¹æ¡ˆï¼›æ–¹å‘ä¹Ÿå¤ªå¤šäº†ï¼Œå“ªæ€•å¤§å‰ç«¯ä¸‰ä¸ªå­—ï¼Œç°ä»Šéƒ½èƒ½æ‹†åˆ†ä¸ºå¾ˆå¤šçš„ç»†åˆ†é¢†åŸŸã€‚ç›´åˆ°é‡åˆ°äº† Romeï¼Œçœ‹åˆ°ç¤¾åŒºå·²ç»å¼€å§‹å°è¯•æ•´åˆé‡æ„ Node ç”Ÿæ€çš„å‰ç«¯å·¥å…·é“¾ï¼›åˆé‡åˆ°äº† Denoï¼Œç›´æ¥æ‘†è„± Node çš„å†å²é—ç•™é—®é¢˜æ¥å»ºè®¾æ›´è´´è¿‘ç°ä»£æ ‡å‡†çš„ JavaScript/TypeScript è¿è¡Œæ—¶ï¼›ç°åœ¨åˆé‡åˆ°äº† Blitz.jsï¼Œä¸€ç«™å¼ React å…¨æ ˆæ¡†æ¶ï¼Œåœ¨ Next.js ä¹‹ä¸Šèµ‹èƒ½æ›´å¤šçš„åç«¯åœºæ™¯...äºæ˜¯è‡ªå·±çš„å¾ˆå¤šæ–¹å‘æ€§é—®é¢˜éƒ½è±ç„¶å¼€æœ—ï¼šé€šè¿‡å»ºç«‹ä¸åŒçš„ Repo æ¥ä¸“æ”»ä¸åŒçš„æ–¹å‘ï¼Œä¸”æ¯ä¸ª Repo éƒ½èƒ½æœ‰ä»£è¡¨æ€§çš„åŒæ—¶ï¼Œè¦†ç›–æ›´å¤šçš„åœºæ™¯ã€‚äºæ˜¯â€”â€”</p>\n<ul>\n<li><a href="https://github.com/hylerrix/deno-tutorial">Deno é’»ç ”ä¹‹æœ¯</a>ï¼šçœ‹æœªæ¥ï¼Œå­¦æ ‡å‡†ã€‚Node ä¹Ÿä¸è½ä¸‹ã€‚</li>\n<li><a href="https://github.com/hylerrix/deno-algorithm">Deno ç®—æ³•ä¹‹æ—…</a>ï¼šåˆ·ç®—æ³•ï¼Œç©æµ‹è¯•ã€‚</li>\n<li><a href="https://github.com/hylerrix/es-interview">ECMAScript é¢è¯•å®å…¸</a>ï¼šå¤‡é¢è¯•ï¼Œæ‰“åŸºç¡€ï¼›</li>\n<li><a href="https://github.com/hylerrix/blitzjs-tutorial">Blitz.js + React å…¨æ ˆå¼€å‘æ‰‹å†Œ</a>ï¼šæå·¥ç¨‹ï¼Œå°å…¨æ ˆã€‚æ·±å…¥ Reactï¼Œå®æˆ˜ Next.jsï¼ŒæŒæ¡åç«¯å¼€å‘ã€‚</li>\n<li>ä»¥åŠè¿˜æœ‰ä¸€åˆ‡å¼ƒå‘çš„ repo......</li>\n</ul>\n<p>å½“ç„¶ï¼ŒBlitz.js è¿˜æœ‰å¾ˆå¤šå¸å¼•äººçš„ç‰¹æ€§ï¼š</p>\n<ul>\n<li><strong>ä¸€ä½“å¼å…¨æ ˆæ¶æ„</strong>ï¼šåœ¨ä¸€ä¸ª Monorepo é‡Œä»æ•°æ®åº“åˆ°ç”¨æˆ·ç«¯å…¨æå®šï¼Œä¹Ÿæ²¡ç”¨é‡å¤æ€§ä»£ç ã€‚è¯•æƒ³å‰åç«¯åˆ†ç¦»çš„æ¶æ„ä¸‹ï¼Œå¦‚æœä½ å–œæ¬¢ TypeScript çš„è¯ï¼Œå¾ˆå¯èƒ½å¾—å†™ä¸¤å¥—ç›¸åŒ TS...ä¸”è¿™ç§ä¸€ä½“å¼æ¶æ„å¾ˆå®¹æ˜“è®©è‡ªå·±çš„é¡¹ç›®çµæ„Ÿä»å¤´åˆ°å°¾åœ°å¿«é€Ÿè½åœ°ã€‚</li>\n<li><strong>API ä¸å†å¿…é¡»</strong>ï¼šREST å’Œ GraphQLï¼Ÿæˆ–è®¸éƒ½ä¸éœ€è¦ï¼Œäº¤ç»™ Blitz.js æ¥åœ¨ç¼–è¯‘æ—¶æ„å»ºã€‚å½“éœ€è¦æä¾› API ç»™æ›´å¤šç«¯ä½¿ç”¨æ—¶ï¼Œå†ç»“åˆç›¸å…³åº“æ¥ç”Ÿæˆ APIã€‚</li>\n<li><strong>æ›´è½»æ¾çš„å¼€ç®±ä½“éªŒ</strong>ï¼šè„šæ‰‹æ¶åˆå§‹åŒ–åç›´æ¥æä¾›ç™»å½•æ³¨å†Œç”šè‡³é‡ç½®å¯†ç åŠŸèƒ½ï¼Œç›´æ¥æ”¯æŒæœ€åŸºæœ¬çš„åç«¯ç¯å¢ƒï¼Œå¼€ç®±å³ç”¨çš„ä½“éªŒä¸èƒ½å†å¥½ï¼ŒåŒæ—¶ç”šè‡³èƒ½é€šè¿‡å¼ºå¤§çš„ blitz generate CLI å¿«é€Ÿæ¤å…¥ç”Ÿæ€åœˆä¸­çš„ä¸»æµåº“åˆ°é¡¹ç›®ä¸­ã€‚</li>\n<li><strong>å¹¶ä¸ä¼šâ€œå­¦ä¸åŠ¨äº†â€</strong>ï¼šåŸºäº Next.jsï¼Œå‰ç«¯ Reactï¼Œåç«¯ Prisma ç­‰åº“ï¼ŒBlitz.js æ„å»ºäºå„ç§å·²ç»ä¸»æµåŒ–çš„ç”Ÿæ€ä¹‹ä¸Šã€‚</li>\n<li><strong>æ‹¥æŠ±æœªæ¥</strong>ï¼šBlitz.js é¢„è®¡å°†äºä¸‹ä¸ªæœˆï¼ˆ2021 å¹´ 4 æœˆï¼‰å‘å¸ƒ v1.0 ç‰ˆæœ¬ã€‚</li>\n</ul>\n<p>æœ¬æ–‡å±äºã€Š<a href="https://github.com/hylerrix/blitzjs-tutorial">Blitz.js + React å…¨æ ˆå¼€å‘æ‰‹å†Œ</a>ã€‹ç³»åˆ—ï¼ŒåŸæ–‡ç¿»è¯‘å†…å®¹ä¼šåŒæ­¥æ›´æ–°åˆ° <a href="https://github.com/blitz-js/zh-hans.blitzjs.com">Blitz.js ä¸­æ–‡ä»“åº“</a> ä¸Šã€‚æ¬¢è¿ Star å’Œ Watchï¼š<a href="https://github.com/hylerrix/blitzjs-tutorial">https://github.com/hylerrix/blitzjs-tutorial</a>ã€‚</p>\n<h2 id="%E5%BF%AB%E9%80%9F%E5%85%A5%E6%89%8B">å¿«é€Ÿå…¥æ‰‹<a class="anchor" href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E6%89%8B">Â§</a></h2>\n<h3 id="%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%E7%8E%AF%E5%A2%83">é…ç½®ä½ çš„ç¯å¢ƒ<a class="anchor" href="#%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%E7%8E%AF%E5%A2%83">Â§</a></h3>\n<p>ä½ éœ€è¦ä½¿ç”¨ Node 12 æˆ–è€…æ›´æ–°çš„ç‰ˆæœ¬ã€‚</p>\n<h3 id="%E5%AE%89%E8%A3%85-blitz">å®‰è£… Blitz<a class="anchor" href="#%E5%AE%89%E8%A3%85-blitz">Â§</a></h3>\n<p>æ‰§è¡Œ <code>npm install -g blitz</code></p>\n<h3 id="%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E9%A1%B9%E7%9B%AE">åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®<a class="anchor" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E9%A1%B9%E7%9B%AE">Â§</a></h3>\n<ol>\n<li><code>blitz new myAppName</code></li>\n<li><code>cd myAppName</code></li>\n<li><code>blitz dev</code></li>\n<li>è®¿é—®ä½ çš„æ–°é¡¹ç›® <a href="http://localhost:3000">http://localhost:3000</a></li>\n</ol>\n<h3 id="%E6%AC%A2%E8%BF%8E%E6%9D%A5%E5%88%B0-blitz-%E7%A4%BE%E5%8C%BA-%F0%9F%91%8B">æ¬¢è¿æ¥åˆ° Blitz ç¤¾åŒº ğŸ‘‹<a class="anchor" href="#%E6%AC%A2%E8%BF%8E%E6%9D%A5%E5%88%B0-blitz-%E7%A4%BE%E5%8C%BA-%F0%9F%91%8B">Â§</a></h3>\n<p>Blitz ç¤¾åŒºæ˜¯ä¸ªæ¸©æš–ã€å®‰å…¨ã€å¤šæ ·åŒ–ã€åŒ…å®¹ä¹Ÿä¸å¤±æœ‰è¶£çš„ç¤¾åŒºï¼ LGBTQ+ã€å¥³ç”Ÿå’Œå°‘æ•°æ´¾æ¬¢è¿ä½ ä»¬çš„åˆ°æ¥ã€‚</p>\n<p><a href="https://discord.blitzjs.com">åŠ å…¥æˆ‘ä»¬çš„ Discord ç¤¾åŒº</a>ï¼Œæˆ‘ä»¬ä¼šåœ¨è¿™é‡Œå¸®åŠ©æ¯ä¸ªäººæ­å»º Blitz åº”ç”¨ã€‚è¿™é‡Œä¹Ÿæ˜¯æˆ‘ä»¬åä½œå…±å»º Blitz æœ¬èº«çš„é‡è¦åœºåœ°ã€‚</p>\n<p>å¯¹äºæé—®ä»¥åŠä¼šèŠ±è´¹è¾ƒé•¿æ—¶é—´çš„è®¨è®ºï¼Œ<a href="https://github.com/blitz-js/blitz/discussions">å¯ä»¥å‘å¸–åˆ°æˆ‘ä»¬çš„è®ºå›ä¸­</a>ã€‚</p>\n<p>æœ‰å…³å®Œæ•´çš„ä»‹ç»ï¼Œè¯·é˜…è¯» ç¤¾åŒºæ˜¯å¦‚ä½•è¿ä½œçš„ã€‚æ–‡ä¸­åŒ…æ‹¬äº†å¦‚ä½•è·å¾—å¸®åŠ©ã€å¦‚ä½•æŠ¥å‘Šé”™è¯¯ä»¥åŠå¦‚ä½•æå‡ºæ–°åŠŸèƒ½å»ºè®®ç­‰çš„è¯¦ç»†æŒ‡å¯¼ã€‚</p>\n<p><strong>æ¬¢è¿ä½ çš„å¸®åŠ©æ¥ä½¿ Blitz å˜å¾—æ›´å¥½ï¼ ğŸ¤</strong></p>\n<p>æˆ‘ä»¬æœ‰ä¸€ä¸ªå¾ˆæ£’çš„ç¤¾åŒºæ­£åœ¨å…±åŒåŠªåŠ›è®© Blitz æˆä¸ºä¸–ç•Œä¸Šä¸€æµçš„æ¡†æ¶ã€‚</p>\n<p>ä½ è¯¥å¦‚ä½•æä¾›å¸®åŠ©ï¼š</p>\n<ol>\n<li>é€šè¿‡ <a href="https://github.com/blitz-js/blitz/issues/new/choose">åœ¨ GitHub ä¸Šæäº¤ issue</a> æ¥åé¦ˆ Bugã€‚</li>\n<li>è´¡çŒ®ä»£ç ï¼š é˜…è¯»è´¡çŒ®æŒ‡å—ï¼Œä»¥äº†è§£å¦‚ä½•å¼€å§‹ã€‚</li>\n<li><a href="https://github.com/blitz-js/blitz#sponsors-and-donations">èµåŠ© &amp; æèµ </a>ï¼Œå¯ä»¥ä» $5/æœˆ å¼€å§‹ã€‚</li>\n<li>ä»¥åŠä½ è§‰å¾—å¯ä»¥çš„å…¶å®ƒä»»ä½•æ–¹å¼ï¼æˆ‘ä»¬éå¸¸æ„Ÿè°¢ä½ çš„ä»»ä½•è´¡çŒ®ï¼ˆå¦‚æ–‡æ¡£ã€è§†é¢‘ã€åšå®¢ç­‰ï¼‰ã€‚å¦‚æœä½ é‡åˆ°ä»»ä½•é˜»ç¢ï¼Œæ¬¢è¿æ¥ Discord ä¸Šä¸æˆ‘ä»¬äº¤æµï¼:)</li>\n</ol>\n<h3 id="%E4%B8%8B%E4%B8%80%E6%AD%A5">ä¸‹ä¸€æ­¥<a class="anchor" href="#%E4%B8%8B%E4%B8%80%E6%AD%A5">Â§</a></h3>\n<h4 id="%E6%95%99%E7%A8%8B">æ•™ç¨‹<a class="anchor" href="#%E6%95%99%E7%A8%8B">Â§</a></h4>\n<p>æ•™ç¨‹ç¯‡ æ˜¯æœ‰å…³ Blitz æ‰€æœ‰åŸºæœ¬å†…å®¹çš„å®Œæ•´ç»ƒä¹ ï¼Œå…¶ä¸­åŒ…æ‹¬å°†æ¨¡å‹æ·»åŠ åˆ°æ•°æ®åº“ä»¥åŠä»å‰ç«¯è¯»å–å’Œæ›´æ–°æ•°æ®ã€‚</p>\n<h4 id="%E5%AD%A6%E4%B9%A0">å­¦ä¹ <a class="anchor" href="#%E5%AD%A6%E4%B9%A0">Â§</a></h4>\n<p>è¿™é‡Œæœ‰ä½ æƒ³è¦ç†Ÿæ‚‰çš„ Blitz çš„å…³é”®æ¦‚å¿µï¼š</p>\n<ul>\n<li>å¦‚ä½• æ–°å»ºé¡µé¢</li>\n<li>å¦‚ä½• ä½¿ç”¨æ–‡ä»¶è·¯ç”±ç³»ç»Ÿ</li>\n<li>å¦‚ä½•è®¾ç½®å¹¶ ä½¿ç”¨æ•°æ®åº“</li>\n<li>å¦‚ä½•ä½¿ç”¨ Blitz Queries å’Œ Mutations æ¥è¯»å†™ä½ çš„æ•°æ®åº“ã€‚</li>\n<li>å¦‚ä½•é€šè¿‡ <code>blitz generate</code> å‘½ä»¤æ¥ç”¨è„šæ‰‹æ¶ç”Ÿæˆæ•°æ®åº“æ¨¡å‹\nçš„æ‰€æœ‰ä»£ç ã€‚</li>\n</ul>\n<h2 id="%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B">å…¥é—¨æ•™ç¨‹<a class="anchor" href="#%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B">Â§</a></h2>\n<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šæŒ‡å¯¼ä½ åˆ›å»ºä¸€ä¸ªç®€æ˜“çš„æŠ•ç¥¨ç³»ç»Ÿã€‚</p>\n<p>æˆ‘ä»¬å°†å‡è®¾ä½ å·²ç» å®‰è£…äº† Blitzã€‚ä½ å¯ä»¥é€šè¿‡åœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç¡®å®š Blitz æ˜¯å¦å·²ç»å®‰è£…æˆ–æ£€æŸ¥å®‰è£…çš„ç‰ˆæœ¬å·ï¼š</p>\n<pre class="language-bash"><code class="language-bash">blitz -v\n</code></pre>\n<p>å¦‚æœ Blitz å·²ç»å®‰è£…æˆåŠŸï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°å®‰è£…çš„ç‰ˆæœ¬å·ã€‚å¦åˆ™ä½ ä¼šæ”¶åˆ°ä¸€æ¡åƒè¿™æ ·çš„é”™è¯¯æç¤ºï¼šâ€œcommand not found: blitzâ€ã€‚</p>\n<h3 id="%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E5%BA%94%E7%94%A8">åˆ›å»ºä¸€ä¸ªæ–°åº”ç”¨<a class="anchor" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E5%BA%94%E7%94%A8">Â§</a></h3>\n<p>åœ¨å‘½ä»¤è¡Œä¸­ï¼Œ<code>cd</code> è¿›å…¥ä½ æƒ³è¦åˆ›å»ºåº”ç”¨çš„æ ¹ç›®å½•æ–‡ä»¶å¤¹åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>\n<pre class="language-autoit"><code class="language-autoit">blitz new my<span class="token operator">-</span>blitz<span class="token operator">-</span>app\n</code></pre>\n<p>Blitz ä¼šåœ¨ä½ å½“å‰çš„æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª <code>my-blitz-app</code> æ–‡ä»¶å¤¹ã€‚ä½ æ¥ç€ä¼šæ”¶åˆ°ä¸€ä¸ªé€‰æ‹©è¡¨å•åº“çš„æç¤ºã€‚æœ¬æ•™ç¨‹ä¸­å°†é€‰æ‹©å…¶ä¸­æ¨èçš„ <code>React Final Form</code> åº“ã€‚</p>\n<p>è®©æˆ‘ä»¬çœ‹çœ‹ <code>blitz new</code> å‘½ä»¤åˆ›å»ºäº†ä»€ä¹ˆï¼š</p>\n<pre class="language-markdown"><code class="language-markdown">my-blitz-app\nâ”œâ”€â”€ app/\nâ”‚   â”œâ”€â”€ api/\nâ”‚   â”œâ”€â”€ auth/\nâ”‚   â”‚   â”œâ”€â”€ components/\nâ”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx\nâ”‚   â”‚   â”‚   â””â”€â”€ SignupForm.tsx\nâ”‚   â”‚   â”œâ”€â”€ mutations/\nâ”‚   â”‚   â”‚   â”œâ”€â”€ changePassword.ts\nâ”‚   â”‚   â”‚   â”œâ”€â”€ forgotPassword.test.ts\nâ”‚   â”‚   â”‚   â”œâ”€â”€ forgotPassword.ts\nâ”‚   â”‚   â”‚   â”œâ”€â”€ login.ts\nâ”‚   â”‚   â”‚   â”œâ”€â”€ logout.ts\nâ”‚   â”‚   â”‚   â”œâ”€â”€ resetPassword.test.ts\nâ”‚   â”‚   â”‚   â”œâ”€â”€ resetPassword.ts\nâ”‚   â”‚   â”‚   â””â”€â”€ signup.ts\nâ”‚   â”‚   â”œâ”€â”€ pages/\nâ”‚   â”‚   â”‚   â”œâ”€â”€ forgot-password.tsx\nâ”‚   â”‚   â”‚   â”œâ”€â”€ login.tsx\nâ”‚   â”‚   â”‚   â”œâ”€â”€ reset-password.tsx\nâ”‚   â”‚   â”‚   â””â”€â”€ signup.tsx\nâ”‚   â”‚   â””â”€â”€ validations.ts\nâ”‚   â”œâ”€â”€ core/\nâ”‚   â”‚   â”œâ”€â”€ components/\nâ”‚   â”‚   â”‚   â”œâ”€â”€ Form.tsx\nâ”‚   â”‚   â”‚   â””â”€â”€ LabeledTextField.tsx\nâ”‚   â”‚   â”œâ”€â”€ hooks/\nâ”‚   â”‚   â”‚   â””â”€â”€ useCurrentUser.ts\nâ”‚   â”‚   â””â”€â”€ layouts/\nâ”‚   â”‚       â””â”€â”€ Layout.tsx\nâ”‚   â”œâ”€â”€ pages/\nâ”‚   â”‚   â”œâ”€â”€ 404.tsx\nâ”‚   â”‚   â”œâ”€â”€ _app.tsx\nâ”‚   â”‚   â”œâ”€â”€ _document.tsx\nâ”‚   â”‚   â”œâ”€â”€ index.test.tsx\nâ”‚   â”‚   â””â”€â”€ index.tsx\nâ”‚   â””â”€â”€ users/\nâ”‚       â””â”€â”€ queries/\nâ”‚           â””â”€â”€ getCurrentUser.ts\nâ”œâ”€â”€ db/\nâ”‚   â”œâ”€â”€ index.ts\nâ”‚   â”œâ”€â”€ schema.prisma\nâ”‚   â””â”€â”€ seeds.ts\nâ”œâ”€â”€ integrations/\nâ”œâ”€â”€ mailers/\nâ”‚   â””â”€â”€ forgotPasswordMailer.ts\nâ”œâ”€â”€ public/\nâ”‚   â”œâ”€â”€ favicon.ico*\nâ”‚   â””â”€â”€ logo.png\nâ”œâ”€â”€ test/\nâ”‚   â”œâ”€â”€ setup.ts\nâ”‚   â””â”€â”€ utils.tsx\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ babel.config.js\nâ”œâ”€â”€ blitz.config.js\nâ”œâ”€â”€ jest.config.js\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ tsconfig.json\nâ”œâ”€â”€ types.d.ts\nâ”œâ”€â”€ types.ts\nâ””â”€â”€ yarn.lock\n</code></pre>\n<p>ä¸Šè¿°æ–‡ä»¶æœ‰ï¼š</p>\n<ul>\n<li><code>app/</code> æ–‡ä»¶å¤¹æ˜¯é¡¹ç›®ä¸­ç»å¤§å¤šæ•°åŠŸèƒ½çš„å®¹å™¨ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ”¾ç½®ä»»ä½•é¡µé¢æˆ– API è·¯ç”±ã€‚</li>\n<li><code>app/pages/</code> æ–‡ä»¶å¤¹æ˜¯ä¸»è¦çš„é¡µé¢æ–‡ä»¶å¤¹ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ Next.js ä½ å°†ä¼šç«‹å³æ³¨æ„åˆ°ä¸¤è€…çš„ä¸åŒã€‚åœ¨ Blitz ä¸­ï¼Œä½ å¯ä»¥æœ‰è®¸å¤š <code>pages</code> æ–‡ä»¶å¤¹ï¼Œå®ƒä»¬å°†åœ¨æ„å»ºæ—¶åˆå¹¶åœ¨ä¸€èµ·ã€‚</li>\n<li><code>app/core/</code> æ–‡ä»¶å¤¹æ˜¯æ”¾ç½®æ•´ä¸ªåº”ç”¨ä¸­ä½¿ç”¨åˆ°çš„é€šç”¨ç»„ä»¶ã€Hooks ç­‰çš„ä¸»è¦ä½ç½®ã€‚</li>\n<li><code>db/</code> æ˜¯æ•°æ®åº“é…ç½®æ‰€åœ¨çš„ä½ç½®ã€‚å¦‚æœä½ æ­£åœ¨ç¼–å†™æ¨¡å‹æˆ–æ£€æŸ¥è¿ç§»æƒ…å†µï¼Œå¯ä»¥æ¥è¿™é‡Œã€‚</li>\n<li><code>public/</code> æ–‡ä»¶å¤¹å¯ä»¥è®©ä½ æ”¾ç½®ä»»ä½•é™æ€èµ„æºã€‚å¦‚æœä½ æœ‰è¦åœ¨åº”ç”¨ä¸­ä½¿ç”¨çš„å›¾åƒã€æ–‡ä»¶æˆ–è§†é¢‘ç­‰ï¼Œéƒ½å¯ä»¥æ”¾ç½®åœ¨å…¶ä¸­ã€‚</li>\n<li><code>.babelrc.js</code>ã€<code>.env</code> ç­‰ï¼ˆâ€œdotfiles æ–‡ä»¶â€ï¼‰æ˜¯å„ç§ JavaScript å·¥å…·éœ€è¦ç”¨åˆ°çš„é…ç½®æ–‡ä»¶ã€‚</li>\n<li><code>blitz.config.js</code> ç”¨äº Blitz çš„é«˜çº§è‡ªå®šä¹‰é…ç½®ï¼Œä¸ <code>next.config.js</code> ç›¸åŒ</li>\n<li><code>tsconfig.json</code> æ˜¯æˆ‘ä»¬æ¨èçš„ TypeScript è®¾ç½®ã€‚</li>\n</ul>\n<h3 id="%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%9C%8D%E5%8A%A1%E5%99%A8">å¼€å‘ç¯å¢ƒæœåŠ¡å™¨<a class="anchor" href="#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%9C%8D%E5%8A%A1%E5%99%A8">Â§</a></h3>\n<p>ç°åœ¨ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰åœ¨ <code>my-blitz-app</code> æ–‡ä»¶å¤¹ä¸‹ï¼Œç¡®ä¿åˆ‡æ¢åˆ°å…¶ä¸­ï¼Œå¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>\n<pre class="language-autoit"><code class="language-autoit">blitz dev\n</code></pre>\n<p>ä½ å°†ä¼šåœ¨å‘½ä»¤è¡Œä¸­çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p>\n<pre class="language-autoit"><code class="language-autoit">âœ” Compiled\nLoaded env from <span class="token operator">/</span>private<span class="token operator">/</span>tmp<span class="token operator">/</span>my<span class="token operator">-</span>blitz<span class="token operator">-</span>app<span class="token operator">/</span><span class="token punctuation">.</span>env\nwarn  <span class="token operator">-</span> You have enabled experimental <span class="token function">feature</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span>\nwarn  <span class="token operator">-</span> Experimental features are <span class="token operator">not</span> covered by semver<span class="token punctuation">,</span> <span class="token operator">and</span> may cause unexpected <span class="token operator">or</span> broken application behavior<span class="token punctuation">.</span> Use them at your own risk<span class="token punctuation">.</span>\n\nready <span class="token operator">-</span> started server on <span class="token number">0.0</span><span class="token punctuation">.</span><span class="token number">0.0</span><span class="token punctuation">:</span><span class="token number">3000</span><span class="token punctuation">,</span> url<span class="token punctuation">:</span> http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">3000</span>\ninfo  <span class="token operator">-</span> Using external babel configuration from <span class="token operator">/</span>my<span class="token operator">-</span>blitz<span class="token operator">-</span>app<span class="token operator">/</span>babel<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js\nevent <span class="token operator">-</span> compiled successfully\n</code></pre>\n<p>ç°åœ¨æœåŠ¡å™¨å·²æˆåŠŸè¿è¡Œï¼Œæµè§ˆå™¨ä¸­è®¿é—® <a href="http://localhost:3000">localhost:3000</a>ã€‚ä½ å°†ä¼šçœ‹åˆ°å¸¦æœ‰ Blitz logo çš„æ¬¢è¿é¡µé¢ã€‚æˆåŠŸäº†ï¼</p>\n<h3 id="%E4%BB%A5%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD%E6%B3%A8%E5%86%8C">ä»¥ç”¨æˆ·èº«ä»½æ³¨å†Œ<a class="anchor" href="#%E4%BB%A5%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD%E6%B3%A8%E5%86%8C">Â§</a></h3>\n<p>Bliz åº”ç”¨è®©ç”¨æˆ·ç™»å½•å’Œæ³¨å†Œå¼€ç®±å³ç”¨ï¼ç°åœ¨è®©æˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹ã€‚ç‚¹å‡» <strong>æ³¨å†Œ</strong> æŒ‰é’®ï¼Œè¾“å…¥ä»»ä½•ç”µå­é‚®ä»¶å’Œå¯†ç ï¼Œç„¶åå•å‡» <strong>åˆ›å»ºè´¦æˆ·</strong> åï¼Œä½ å°†è¢«é‡å®šå‘åˆ°ç”¨æˆ·ä¸»é¡µï¼Œå¹¶åœ¨å…¶ä¸­å¯ä»¥çœ‹åˆ°ä½ çš„ç”¨æˆ· <code>id</code> å’Œ <code>role</code>ã€‚</p>\n<p>å¦‚æœéœ€è¦ï¼Œä½ ä¹Ÿå¯ä»¥å°è¯•æ³¨é”€å¹¶é‡æ–°ç™»å½•ã€‚æˆ–åœ¨ç™»å½•é¡µé¢ä¸Šå•å‡» <strong>å¿˜è®°å¯†ç </strong>ï¼Œä»¥å°è¯•é‡ç½®å¯†ç æµç¨‹ã€‚</p>\n<h3 id="%E7%BC%96%E5%86%99%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2">ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ªé¡µé¢<a class="anchor" href="#%E7%BC%96%E5%86%99%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2">Â§</a></h3>\n<p>æ¥ä¸‹æ¥è®©æˆ‘ä»¬åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªé¡µé¢ã€‚</p>\n<p>æ‰“å¼€ <code>app/pages/index.tsx</code> æ–‡ä»¶ç„¶åæ›¿æ¢æ‰ <code>Home</code> ç»„ä»¶çš„æ‰€æœ‰å†…å®¹ä¸ºè¿™æ®µä»£ç ï¼š</p>\n<pre class="language-jsx"><code class="language-jsx"><span class="token comment">//...</span>\n\n<span class="token keyword">const</span> <span class="token maybe-class-name">Home</span><span class="token operator">:</span> <span class="token function-variable function"><span class="token maybe-class-name">BlitzPage</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Hello, world!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">\n\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">fallback</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Loading...<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">//...</span>\n</code></pre>\n<p>ä¿å­˜æ–‡ä»¶åä½ å°†ä¼šçœ‹åˆ°æµè§ˆå™¨é¡µé¢è¿›è¡Œäº†æ›´æ–°ã€‚ä½ å¯ä»¥å¦‚ä½ æ‰€æ„¿åœ°æ·»åŠ éœ€è¦çš„å„ç§è‡ª\nå®šä¹‰é¡¹ï¼Œã€‚å‡†å¤‡å°±ç»ªåï¼Œè¯·è½¬åˆ°ä¸‹ä¸€èŠ‚ã€‚</p>\n<h3 id="%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE">æ•°æ®åº“é…ç½®<a class="anchor" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE">Â§</a></h3>\n<p>å¥½æ¶ˆæ¯æ˜¯ï¼Œå·²ç»ä¸ºä½ å»ºç«‹å¥½äº† SQLite æ•°æ®åº“ï¼ä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¿è¡Œ <code>blitz prisma studio</code> æ¥æ‰“å¼€ä¸€ä¸ªå¯ä»¥æŸ¥çœ‹æ•°æ®åº“æ•°æ®çš„ Web ç•Œé¢ã€‚</p>\n<p>è¯·æ³¨æ„ï¼Œåœ¨å¼€å§‹ç¬¬ä¸€ä¸ªå®é™…é¡¹ç›®æ—¶ï¼Œä½ å¯èƒ½å¸Œæœ›ä½¿ç”¨å¯æ‰©å±•æ€§æ›´é«˜çš„æ•°æ®åº“ï¼ˆå¦‚ PostgreSQLï¼‰ï¼Œä»¥é¿å…åœ¨å°†æ¥åˆ‡æ¢æ•°æ®åº“æ—¶äº§ç”Ÿçš„éº»çƒ¦ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ æ•°æ®åº“æ¦‚è¿° ç¯‡ã€‚ç›®å‰ï¼Œæˆ‘ä»¬å°†ç»§ç»­ä½¿ç”¨é»˜è®¤çš„ SQLite æ•°æ®åº“ã€‚</p>\n<h3 id="%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E4%BB%A3%E7%A0%81">æ¨¡å‹çš„è„šæ‰‹æ¶ä»£ç <a class="anchor" href="#%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E4%BB%A3%E7%A0%81">Â§</a></h3>\n<p>Blitz æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„ CLI å‘½ä»¤ <code>generate</code> æ¥æ„å»ºæ ·æ¿ä»£ç ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ <code>generate</code> æ¥åˆ›å»ºä¸¤ä¸ªæ¨¡å‹ï¼š<code>Question</code>ï¼ˆé—®é¢˜ï¼‰ å’Œ <code>Choice</code>ï¼ˆé€‰æ‹©ï¼‰ã€‚<code>Question</code> åŒ…å«é—®é¢˜å†…å®¹å’Œé€‰æ‹©åˆ—è¡¨ã€‚<code>Choice</code> åŒ…å«é€‰æ‹©å†…å®¹ã€æŠ•ç¥¨è®¡æ•°ä»¥åŠç›¸å…³çš„é—®é¢˜ã€‚Blitz å°†ä¸ºè¿™ä¸¤ä¸ªæ¨¡å‹è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª idã€ä¸€ä¸ªåˆ›å»ºæ—¶é—´æˆ³ä»¥åŠä¸€ä¸ªæœ€æ–°æ›´æ–°çš„æ—¶é—´æˆ³ã€‚</p>\n<h4 id="%E9%A6%96%E5%85%88%E6%88%91%E4%BB%AC%E5%B0%86%E7%94%9F%E6%88%90%E4%B8%8E-question-%E6%A8%A1%E5%9E%8B%E6%9C%89%E5%85%B3%E7%9A%84%E6%89%80%E6%9C%89%E4%BF%A1%E6%81%AF">é¦–å…ˆï¼Œæˆ‘ä»¬å°†ç”Ÿæˆä¸ <code>Question</code> æ¨¡å‹æœ‰å…³çš„æ‰€æœ‰ä¿¡æ¯ï¼š<a class="anchor" href="#%E9%A6%96%E5%85%88%E6%88%91%E4%BB%AC%E5%B0%86%E7%94%9F%E6%88%90%E4%B8%8E-question-%E6%A8%A1%E5%9E%8B%E6%9C%89%E5%85%B3%E7%9A%84%E6%89%80%E6%9C%89%E4%BF%A1%E6%81%AF">Â§</a></h4>\n<pre class="language-bash"><code class="language-bash">blitz generate all question text:string\n</code></pre>\n<p>å½“å‡ºç°æç¤ºæ¡†æ—¶ï¼ŒæŒ‰ <strong>Enter</strong> ä»¥è¿è¡Œ <code>prisma migrate</code>ï¼Œè¿™å°†ä½¿ç”¨æ–°çš„æ¨¡å‹æ¥æ›´æ–°ä½ çš„æ•°æ®åº“æ¶æ„ã€‚æ­¤æ—¶ä¼šè¦æ±‚ä¸€ä¸ªåç§°ï¼Œå¯ä»¥è¾“å…¥â€œadd questionâ€ä¹‹ç±»çš„å€¼ã€‚</p>\n<pre class="language-bash"><code class="language-bash">CREATE    app/pages/questions/<span class="token punctuation">[</span>questionId<span class="token punctuation">]</span>.tsx\nCREATE    app/pages/questions/<span class="token punctuation">[</span>questionId<span class="token punctuation">]</span>/edit.tsx\nCREATE    app/pages/questions/index.tsx\nCREATE    app/pages/questions/new.tsx\nCREATE    app/questions/components/QuestionForm.tsx\nCREATE    app/questions/queries/getQuestion.ts\nCREATE    app/questions/queries/getQuestions.ts\nCREATE    app/questions/mutations/createQuestion.ts\nCREATE    app/questions/mutations/deleteQuestion.ts\nCREATE    app/questions/mutations/updateQuestion.ts\n\nâœ” Model <span class="token keyword">for</span> <span class="token string">\'question\'</span> created <span class="token keyword">in</span> schema.prisma:\n\n<span class="token operator">></span> model Question <span class="token punctuation">{</span>\n<span class="token operator">></span>   <span class="token function">id</span>        Int      @default<span class="token punctuation">(</span>autoincrement<span class="token punctuation">(</span><span class="token punctuation">))</span> @id\n<span class="token operator">></span>   createdAt DateTime @default<span class="token punctuation">(</span>now<span class="token punctuation">(</span><span class="token punctuation">))</span>\n<span class="token operator">></span>   updatedAt DateTime @updatedAt\n<span class="token operator">></span>   text      String\n<span class="token operator">></span> <span class="token punctuation">}</span>\n\n? Run <span class="token string">\'prisma migrate dev\'</span> to update your database? <span class="token punctuation">(</span>Y/n<span class="token punctuation">)</span> â€º <span class="token boolean">true</span>\n</code></pre>\n<pre class="language-bash"><code class="language-bash">Environment variables loaded from .env\nPrisma schema loaded from db/schema.prisma\nDatasource <span class="token string">"db"</span><span class="token builtin class-name">:</span> SQLite database <span class="token string">"db.sqlite"</span> at <span class="token string">"file:./db.sqlite"</span>\n\nâœ” Name of migration â€¦ <span class="token function">add</span> question\nThe following migration<span class="token punctuation">(</span>s<span class="token punctuation">)</span> have been created and applied from new schema changes:\n\nmigrations/\n  â””â”€ 20210217035805_add_question/\n    â””â”€ migration.sql\n\nâœ” Generated Prisma Client <span class="token punctuation">(</span><span class="token number">2.17</span>.0<span class="token punctuation">)</span> to ./<a class="token email-link" href="mailto:node_modules/@prisma">node_modules/@prisma</a>/client <span class="token keyword">in</span> 103ms\n\nEverything is now <span class="token keyword">in</span> sync.\n</code></pre>\n<p><code>generate</code> å‘½ä»¤æ­é… <code>all</code> ç±»å‹å°†ç”Ÿæˆç›¸å…³çš„æ¨¡å‹ã€queriesã€mutation å’Œé¡µé¢æ–‡ä»¶ã€‚è¯·å‚è§ Blitz generate é¡µé¢æŸ¥è¯¢æ›´å¤šå¯ç”¨çš„ç±»å‹é€‰é¡¹ã€‚</p>\n<h4 id="%E6%8E%A5%E4%B8%8B%E6%9D%A5%E6%88%91%E4%BB%AC%E5%B0%86%E7%94%9F%E6%88%90%E5%B8%A6%E6%9C%89%E7%9B%B8%E5%BA%94-queries-%E5%92%8C-mutations-%E7%9A%84-choice-%E6%A8%A1%E5%9E%8B">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç”Ÿæˆå¸¦æœ‰ç›¸åº” queries å’Œ mutations çš„ <code>Choice</code> æ¨¡å‹ã€‚<a class="anchor" href="#%E6%8E%A5%E4%B8%8B%E6%9D%A5%E6%88%91%E4%BB%AC%E5%B0%86%E7%94%9F%E6%88%90%E5%B8%A6%E6%9C%89%E7%9B%B8%E5%BA%94-queries-%E5%92%8C-mutations-%E7%9A%84-choice-%E6%A8%A1%E5%9E%8B">Â§</a></h4>\n<p>è¿™æ¬¡æˆ‘ä»¬æ­é… <code>resource</code> ç±»å‹ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦ä¸º <code>Choice</code> æ¨¡å‹ç”Ÿæˆé¡µé¢ï¼š</p>\n<pre class="language-bash"><code class="language-bash">blitz generate resource choice text votes:int:default<span class="token operator">=</span><span class="token number">0</span> belongsTo:question\n</code></pre>\n<p>åŒæ ·ï¼Œåœ¨ç³»ç»Ÿæç¤ºä½ è¿›è¡Œè¿ç§»æ—¶ï¼ŒæŒ‰ <strong>Enter</strong> åè¾“å…¥è¿ç§»çš„åç§°ã€‚</p>\n<pre class="language-bash"><code class="language-bash">CREATE    app/choices/queries/getChoice.ts\nCREATE    app/choices/queries/getChoices.ts\nCREATE    app/choices/mutations/createChoice.ts\nCREATE    app/choices/mutations/deleteChoice.ts\nCREATE    app/choices/mutations/updateChoice.ts\n\nâœ” Model <span class="token keyword">for</span> <span class="token string">\'choice\'</span> created <span class="token keyword">in</span> schema.prisma:\n\n<span class="token operator">></span> model Choice <span class="token punctuation">{</span>\n<span class="token operator">></span>   <span class="token function">id</span>         Int      @default<span class="token punctuation">(</span>autoincrement<span class="token punctuation">(</span><span class="token punctuation">))</span> @id\n<span class="token operator">></span>   createdAt  DateTime @default<span class="token punctuation">(</span>now<span class="token punctuation">(</span><span class="token punctuation">))</span>\n<span class="token operator">></span>   updatedAt  DateTime @updatedAt\n<span class="token operator">></span>   text       String\n<span class="token operator">></span>   votes      Int      @default<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>\n<span class="token operator">></span>   question   Question @relation<span class="token punctuation">(</span>fields: <span class="token punctuation">[</span>questionId<span class="token punctuation">]</span>, references: <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token operator">></span>   questionId Int\n<span class="token operator">></span> <span class="token punctuation">}</span>\n\n? Run <span class="token string">\'prisma migrate dev\'</span> to update your database? <span class="token punctuation">(</span>Y/n<span class="token punctuation">)</span> â€º <span class="token boolean">true</span>\n</code></pre>\n<h4 id="%E6%9C%80%E5%90%8E%E8%AE%A9%E6%88%91%E4%BB%AC%E6%9B%B4%E6%96%B0-question-%E6%A8%A1%E5%9E%8B%E4%BB%A5%E5%85%B3%E8%81%94%E5%88%B0-choice-%E4%B8%8A">æœ€åï¼Œè®©æˆ‘ä»¬æ›´æ–° <code>Question</code> æ¨¡å‹ä»¥å…³è”åˆ° <code>Choice</code> ä¸Šã€‚<a class="anchor" href="#%E6%9C%80%E5%90%8E%E8%AE%A9%E6%88%91%E4%BB%AC%E6%9B%B4%E6%96%B0-question-%E6%A8%A1%E5%9E%8B%E4%BB%A5%E5%85%B3%E8%81%94%E5%88%B0-choice-%E4%B8%8A">Â§</a></h4>\n<p>æ‰“å¼€ <code>db/schema.prisma</code> å¹¶åœ¨ <code>Question</code> æ¨¡å‹ä¸­æ·»åŠ  <code>choices Choice[]</code>ã€‚</p>\n<pre class="language-diff"><code class="language-diff">model Question {\n<span class="token unchanged"><span class="token prefix unchanged"> </span> id        Int      @id @default(autoincrement())\n<span class="token prefix unchanged"> </span> createdAt DateTime @default(now())\n<span class="token prefix unchanged"> </span> updatedAt DateTime @updatedAt\n<span class="token prefix unchanged"> </span> text      String\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span> choices   Choice[]\n</span>}\n</code></pre>\n<p>ç„¶åè¿è¡Œ <code>blitz prisma generate</code> æ¥æ›´æ–° prisma å®¢æˆ·ç«¯ä»¥åŒæ­¥ schema çš„æ›´æ”¹ã€‚è¿™é‡Œä¸æ¶‰åŠæ•°æ®åº“è¿ç§»ï¼Œå› ä¸ºæ•°æ®åº“ä¸­æ²¡æœ‰å®é™…å­—æ®µæ·»åŠ åˆ° <code>Question</code> æ¨¡å‹ä¸­ã€‚</p>\n<h3 id="%E8%AE%BF%E9%97%AE-prisma-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%A2%E6%88%B7%E7%AB%AF">è®¿é—® Prisma æ•°æ®åº“å®¢æˆ·ç«¯<a class="anchor" href="#%E8%AE%BF%E9%97%AE-prisma-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%A2%E6%88%B7%E7%AB%AF">Â§</a></h3>\n<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬è·³è¿› Blitz äº¤äº’å¼ Shell ä¸­ï¼Œå¹¶ä½¿ç”¨ Blitz ä¸ºä½ æä¾›çš„ Primsa æ•°æ®åº“å®¢æˆ·ç«¯ã€‚è¦å¯åŠ¨ Blitz æ§åˆ¶å°ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>\n<pre class="language-bash"><code class="language-bash">blitz console\n</code></pre>\n<p>ä¸€æ—¦ä½ è¿›å…¥æ§åˆ¶å°åï¼Œæµè§ˆæ•°æ®åº“å®¢æˆ·ç«¯ï¼š</p>\n<pre class="language-bash"><code class="language-bash"><span class="token comment"># No questions are in the system yet.</span>\nâš¡ <span class="token operator">></span> await db.question.findMany<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">[</span><span class="token punctuation">]</span>\n\n<span class="token comment"># Create a new Question:</span>\nâš¡ <span class="token operator">></span> <span class="token builtin class-name">let</span> q <span class="token operator">=</span> await db.question.create<span class="token punctuation">(</span><span class="token punctuation">{</span>data: <span class="token punctuation">{</span>text: <span class="token string">"What\'s new?"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\nundefined\n\n<span class="token comment"># See the entire object:</span>\nâš¡ <span class="token operator">></span> q\n<span class="token punctuation">{</span>\n  id: <span class="token number">1</span>,\n  createdAt: <span class="token number">2020</span>-06-15T15:06:14.959Z,\n  updatedAt: <span class="token number">2020</span>-06-15T15:06:14.959Z,\n  text: <span class="token string">"What\'s new?"</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment"># Or, access individual values on the object:</span>\nâš¡ <span class="token operator">></span> q.text\n<span class="token string">"What\'s new?"</span>\n\n<span class="token comment"># Change values by using the update function:</span>\nâš¡ <span class="token operator">></span> q <span class="token operator">=</span> await db.question.update<span class="token punctuation">(</span><span class="token punctuation">{</span>where: <span class="token punctuation">{</span>id: <span class="token number">1</span><span class="token punctuation">}</span>, data: <span class="token punctuation">{</span>text: <span class="token string">"What\'s up?"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n  id: <span class="token number">1</span>,\n  createdAt: <span class="token number">2020</span>-06-15T15:06:14.959Z,\n  updatedAt: <span class="token number">2020</span>-06-15T15:13:17.394Z,\n  text: <span class="token string">"What\'s up?"</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment"># db.question.findMany() now displays all the questions in the database:</span>\nâš¡ <span class="token operator">></span> await db.question.findMany<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">[</span>\n  <span class="token punctuation">{</span>\n    id: <span class="token number">1</span>,\n    createdAt: <span class="token number">2020</span>-06-15T15:06:14.959Z,\n    updatedAt: <span class="token number">2020</span>-06-15T15:13:17.394Z,\n    text: <span class="token string">"What\'s up?"</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">]</span>\n</code></pre>\n<h3 id="%E6%9B%B4%E6%96%B0%E6%A8%A1%E5%9E%8B%E5%B1%9E%E6%80%A7%E7%94%9F%E6%88%90%E7%9A%84%E4%BB%A3%E7%A0%81">æ›´æ–°æ¨¡å‹å±æ€§ç”Ÿæˆçš„ä»£ç <a class="anchor" href="#%E6%9B%B4%E6%96%B0%E6%A8%A1%E5%9E%8B%E5%B1%9E%E6%80%A7%E7%94%9F%E6%88%90%E7%9A%84%E4%BB%A3%E7%A0%81">Â§</a></h3>\n<blockquote>\n<p>åœ¨å†æ¬¡è¿è¡Œè¯¥åº”ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€äº›å·²ç”Ÿæˆçš„ä»£ç ã€‚æœ€ç»ˆè¿™äº›ä¿®å¤è¿‡ç¨‹å°†ä¸å†éœ€è¦â€”â€”ä½†å°±ç›®å‰è€Œè¨€ï¼Œæˆ‘ä»¬éœ€è¦è§£å†³ç»“æœæœªè§£å†³çš„é—®é¢˜ã€‚</p>\n</blockquote>\n<p>è‡ªåŠ¨ç”Ÿæˆçš„é¡µé¢ï¼Œå½“å‰å¹¶æœªä½¿ç”¨ä½ åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­å®šä¹‰çš„å®é™…æ¨¡å‹çš„å±æ€§ã€‚ä»¥åä¼šæ”¯æŒï¼Œä½†ç°åœ¨ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ä¿®å¤ç”Ÿæˆçš„é¡µé¢ã€‚</p>\n<h4 id="question-%E9%A1%B5%E9%9D%A2">Question é¡µé¢<a class="anchor" href="#question-%E9%A1%B5%E9%9D%A2">Â§</a></h4>\n<p>è¿›å…¥ <code>app/pages/questions/index.tsx</code>. è¯·æ³¨æ„åˆ°ä¸€ä¸ª <code>QuestionsList</code> ç»„ä»¶å·²ç»ä¸ºä½ ç”Ÿæˆäº†ï¼š</p>\n<pre class="language-jsx"><code class="language-jsx"><span class="token comment">// app/pages/questions/index.tsx</span>\n\n<span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function"><span class="token maybe-class-name">QuestionsList</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token known-class-name class-name">Number</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token property-access">query</span><span class="token punctuation">.</span><span class="token property-access">page</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>questions<span class="token punctuation">,</span> hasMore<span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">usePaginatedQuery</span><span class="token punctuation">(</span>getQuestions<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n    orderBy<span class="token operator">:</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token string">"asc"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n    skip<span class="token operator">:</span> <span class="token constant">ITEMS_PER_PAGE</span> <span class="token operator">*</span> page<span class="token punctuation">,</span>\n    take<span class="token operator">:</span> <span class="token constant">ITEMS_PER_PAGE</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n  <span class="token keyword">const</span> <span class="token function-variable function">goToPreviousPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> router<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>query<span class="token operator">:</span> <span class="token punctuation">{</span>page<span class="token operator">:</span> page <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> <span class="token function-variable function">goToNextPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> router<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>query<span class="token operator">:</span> <span class="token punctuation">{</span>page<span class="token operator">:</span> page <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token punctuation">{</span>questions<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">question</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>question<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">href</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/questions/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>question<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>question<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token plain-text">\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">\n\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>page <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>goToPreviousPage<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        Previous\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token operator">!</span>hasMore<span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>goToNextPage<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        Next\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<p>ä¸è¿‡ç›®å‰è·‘ä¸é€šçš„ï¼è¯·è®°ä½æˆ‘ä»¬åˆ›å»ºçš„ <code>Question</code> æ¨¡å‹ä¸Šé¢æ²¡æœ‰ä»»ä½•â€œnameâ€å­—æ®µã€‚\nè¦è§£å†³æ­¤é—®é¢˜ï¼Œè¯·æ›¿æ¢ <code>question.name</code> ä¸º <code>question.text</code>ã€‚</p>\n<pre class="language-diff"><code class="language-diff">// app/pages/questions/index.tsx\n\nexport const QuestionsList = () => {\n<span class="token unchanged"><span class="token prefix unchanged"> </span> const router = useRouter()\n<span class="token prefix unchanged"> </span> const page = Number(router.query.page) || 0\n<span class="token prefix unchanged"> </span> const [{questions, hasMore}] = usePaginatedQuery(getQuestions, {\n<span class="token prefix unchanged"> </span>   orderBy: {id: "asc"},\n<span class="token prefix unchanged"> </span>   skip: ITEMS_PER_PAGE * page,\n<span class="token prefix unchanged"> </span>   take: ITEMS_PER_PAGE,\n<span class="token prefix unchanged"> </span> })\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span> const goToPreviousPage = () => router.push({query: {page: page - 1}})\n<span class="token prefix unchanged"> </span> const goToNextPage = () => router.push({query: {page: page + 1}})\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span> return (\n<span class="token prefix unchanged"> </span>   &lt;div>\n<span class="token prefix unchanged"> </span>     &lt;ul>\n<span class="token prefix unchanged"> </span>       {questions.map((question) => (\n<span class="token prefix unchanged"> </span>         &lt;li key={question.id}>\n<span class="token prefix unchanged"> </span>           &lt;Link href={`/questions/${question.id}`}>\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>              &lt;a>{question.name}&lt;/a>\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>              &lt;a>{question.text}&lt;/a>\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span>           &lt;/Link>\n<span class="token prefix unchanged"> </span>         &lt;/li>\n<span class="token prefix unchanged"> </span>       ))}\n<span class="token prefix unchanged"> </span>     &lt;/ul>\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>     &lt;button disabled={page === 0} onClick={goToPreviousPage}>\n<span class="token prefix unchanged"> </span>       Previous\n<span class="token prefix unchanged"> </span>     &lt;/button>\n<span class="token prefix unchanged"> </span>     &lt;button disabled={!hasMore} onClick={goToNextPage}>\n<span class="token prefix unchanged"> </span>       Next\n<span class="token prefix unchanged"> </span>     &lt;/button>\n<span class="token prefix unchanged"> </span>   &lt;/div>\n<span class="token prefix unchanged"> </span> )\n</span>}\n</code></pre>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç±»ä¼¼çš„ä¿®å¤æ–¹æ³•åº”ç”¨äº <code>app/questions/components/QuestionForm.tsx</code> ä¸­ã€‚åœ¨è¡¨å•æäº¤ä¸­ï¼Œå°† <code>LabeledTextField</code> ä¸­ <code>name</code> å˜ä¸º <code>text</code>ã€‚</p>\n<pre class="language-diff"><code class="language-diff">export function QuestionForm&lt;S extends z.ZodType&lt;any, any>>(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> props: FormProps&lt;S>,\n</span>) {\n<span class="token unchanged"><span class="token prefix unchanged"> </span> return (\n<span class="token prefix unchanged"> </span>   &lt;Form&lt;S> {...props}>\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>     &lt;LabeledTextField name="name" label="Name" placeholder="Name" />\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>     &lt;LabeledTextField name="text" label="Text" placeholder="Text" />\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span>   &lt;/Form>\n<span class="token prefix unchanged"> </span> )\n</span>}\n</code></pre>\n<h4 id="createquestion-mutation"><code>createQuestion</code> mutation<a class="anchor" href="#createquestion-mutation">Â§</a></h4>\n<p>åœ¨ <code>app/questions/mutations/createQuestion.ts</code> ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–° <code>CreateQuestion</code> zod éªŒè¯æ¨¡å¼ï¼Œä½¿ç”¨ <code>text</code> è€Œä¸æ˜¯ <code>name</code>ã€‚</p>\n<pre class="language-diff"><code class="language-diff">// app/questions/mutations/createQuestion.ts\n\nconst CreateQuestion = z\n<span class="token unchanged"><span class="token prefix unchanged"> </span> .object({\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   name: z.string(),\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   text: z.string(),\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span> })\n<span class="token prefix unchanged"> </span> .nonstrict()\n</span>// ...\n</code></pre>\n<h4 id="updatequestion-mutation"><code>updateQuestion</code> mutation<a class="anchor" href="#updatequestion-mutation">Â§</a></h4>\n<p>åœ¨ <code>app/questions/mutations/updateQuestion.ts</code> ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–° <code>UpdateQuestion</code> zod éªŒè¯æ¨¡å¼ï¼Œä½¿ç”¨ <code>text</code> è€Œä¸æ˜¯ <code>name</code>ã€‚</p>\n<pre class="language-diff"><code class="language-diff">// app/questions/mutations/updateQuestion.ts\n\nconst UpdateQuestion = z\n<span class="token unchanged"><span class="token prefix unchanged"> </span> .object({\n<span class="token prefix unchanged"> </span>   id: z.number(),\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   name: z.string(),\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   text: z.string(),\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span> })\n<span class="token prefix unchanged"> </span> .nonstrict()\n</span>// ...\n</code></pre>\n<h4 id="deletequestion-mutation"><code>deleteQuestion</code> mutation<a class="anchor" href="#deletequestion-mutation">Â§</a></h4>\n<p>Prisma å°šä¸æ”¯æŒâ€œçº§è”åˆ é™¤â€ã€‚åœ¨æœ¬æ•™ç¨‹çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™æ„å‘³ç€å®ƒåœ¨åˆ é™¤ <code>Question</code> æ—¶ä¸ä¼šåˆ é™¤ç›¸å…³çš„ <code>Choice</code>æ•°æ®ã€‚æˆ‘ä»¬éœ€è¦ä¸´æ—¶æ”¹åŠ¨ç”Ÿæˆçš„ <code>deleteQuestion</code> mutationï¼Œä»¥ä¾¿æ‰‹åŠ¨åšè¿™ä»¶äº‹ã€‚åœ¨æ–‡æœ¬ç¼–è¾‘æ¡†ä¸­æ‰“å¼€ <code>app/questions/mutations/deleteQuestion.ts</code> å¹¶å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°å‡½æ•°ä¸»ä½“çš„é¡¶\néƒ¨ã€‚</p>\n<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">await</span> db<span class="token punctuation">.</span>choice<span class="token punctuation">.</span><span class="token function">deleteMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span>where<span class="token operator">:</span> <span class="token punctuation">{</span>questionId<span class="token operator">:</span> id<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre>\n<p>æœ€ç»ˆçš„æ•ˆæœåº”è¯¥ä¸ºï¼š</p>\n<pre class="language-diff"><code class="language-diff">// app/questions/mutations/deleteQuestion.ts\n\nexport default resolver.pipe(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> resolver.zod(DeleteQuestion),\n<span class="token prefix unchanged"> </span> resolver.authorize(),\n<span class="token prefix unchanged"> </span> async ({id}) => {\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   await db.choice.deleteMany({where: {questionId: id}})\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span>   const question = await db.question.deleteMany({where: {id}})\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>   return question\n<span class="token prefix unchanged"> </span> },\n</span>)\n</code></pre>\n<p>ç°åœ¨ï¼Œæ­¤ mutation å°†åœ¨åˆ é™¤é—®é¢˜æœ¬èº«ä¹‹å‰ï¼Œåˆ é™¤ä¸é—®é¢˜ç›¸å…³çš„é€‰æ‹©ã€‚</p>\n<h4 id="%E7%8E%B0%E5%9C%A8%E5%B0%9D%E8%AF%95%E5%88%9B%E5%BB%BA%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4%E9%97%AE%E9%A2%98">ç°åœ¨å°è¯•åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤é—®é¢˜<a class="anchor" href="#%E7%8E%B0%E5%9C%A8%E5%B0%9D%E8%AF%95%E5%88%9B%E5%BB%BA%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4%E9%97%AE%E9%A2%98">Â§</a></h4>\n<p>å¤ªæ£’äº†ï¼ç°åœ¨ç¡®ä¿ä½ çš„ç¨‹åºæ­£å¸¸è¿è¡Œã€‚å¦åˆ™åœ¨ä½ çš„ç»ˆç«¯ä¸­æ‰§è¡Œ <code>blitz dev</code>ï¼Œç„¶åè®¿é—® <code>localhost:3000/questions</code>ã€‚å°è¯•åˆ›å»ºé—®é¢˜å¹¶ç¼–è¾‘ã€åˆ é™¤å®ƒä»¬ã€‚</p>\n<h3 id="%E5%9C%A8%E9%97%AE%E9%A2%98%E8%A1%A8%E6%A0%BC%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%80%89%E6%8B%A9%E9%A1%B9">åœ¨é—®é¢˜è¡¨æ ¼ä¸­æ·»åŠ é€‰æ‹©é¡¹<a class="anchor" href="#%E5%9C%A8%E9%97%AE%E9%A2%98%E8%A1%A8%E6%A0%BC%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%80%89%E6%8B%A9%E9%A1%B9">Â§</a></h3>\n<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ åšçš„å¾ˆæ£’ï¼æˆ‘ä»¬è¦åšçš„ä¸‹ä¸€ä»¶äº‹æ˜¯åœ¨æˆ‘ä»¬çš„é—®é¢˜ä¸­æ·»åŠ é€‰æ‹©ã€‚åœ¨ä½ çš„ç¼–è¾‘å™¨ä¸­æ‰“å¼€ <code>app/questions/components/QuestionForm.tsx</code>ã€‚</p>\n<p>æ·»åŠ å¦å¤–ä¸‰ä¸ª <code>&lt;LabeledTextField&gt;</code> ç»„ä»¶ä½œä¸ºé€‰æ‹©ã€‚</p>\n<pre class="language-diff"><code class="language-diff">export function QuestionForm&lt;S extends z.ZodType&lt;any, any>>(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> props: FormProps&lt;S>,\n</span>) {\n<span class="token unchanged"><span class="token prefix unchanged"> </span> return (\n<span class="token prefix unchanged"> </span>   &lt;Form&lt;S> {...props}>\n<span class="token prefix unchanged"> </span>     &lt;LabeledTextField name="text" label="Text" placeholder="Text" />\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>     &lt;LabeledTextField name="choices.0.text" label="Choice 1" />\n<span class="token prefix inserted">+</span>     &lt;LabeledTextField name="choices.1.text" label="Choice 2" />\n<span class="token prefix inserted">+</span>     &lt;LabeledTextField name="choices.2.text" label="Choice 3" />\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span>   &lt;/Form>\n<span class="token prefix unchanged"> </span> )\n</span>}\n</code></pre>\n<p>ç°åœ¨æ‰“å¼€ <code>app/pages/questions/new.tsx</code> å¹¶è®¾ç½® <code>initialValues</code> ä¸ºå¦‚ä¸‹ï¼š</p>\n<pre class="language-diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span>     &lt;QuestionForm\n<span class="token prefix unchanged"> </span>       submitText="Create Question"\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>       // initialValues={{ }}\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>       initialValues={{choices: []}}\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span>       onSubmit={async (values) => {\n<span class="token prefix unchanged"> </span>         try {\n<span class="token prefix unchanged"> </span>           const question = await createQuestionMutation(values)\n<span class="token prefix unchanged"> </span>           router.push(`/questions/${question.id}`)\n<span class="token prefix unchanged"> </span>         } catch (error) {\n<span class="token prefix unchanged"> </span>           console.error(error)\n<span class="token prefix unchanged"> </span>           return {\n<span class="token prefix unchanged"> </span>             [FORM_ERROR]: error.toString(),\n<span class="token prefix unchanged"> </span>           }\n<span class="token prefix unchanged"> </span>         }\n<span class="token prefix unchanged"> </span>       }}\n<span class="token prefix unchanged"> </span>     />\n</span></code></pre>\n<p>æ¥ä¸‹æ¥æ‰“å¼€ <code>app/questions/mutations/createQuestion.ts</code> å¹¶æ›´æ–° zod æ¨¡å¼ï¼Œæ¥è®© mutation æ¥æ”¶ choice æ•°æ®ã€‚è€Œä¸”æˆ‘ä»¬è¿˜éœ€è¦æ›´æ–° <code>db.question.create</code> è°ƒç”¨ï¼Œä»¥ä¾¿ choice ä¹Ÿå¯ä»¥è¢«åˆ›å»ºã€‚</p>\n<pre class="language-diff"><code class="language-diff">// app/questions/mutations/createQuestion.ts\n\nconst CreateQuestion = z\n<span class="token unchanged"><span class="token prefix unchanged"> </span> .object({\n<span class="token prefix unchanged"> </span>   text: z.string(),\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   choices: z.array(z.object({text: z.string()})),\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span> })\n<span class="token prefix unchanged"> </span> .nonstrict()\n</span>\nexport default resolver.pipe(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> resolver.zod(CreateQuestion),\n<span class="token prefix unchanged"> </span> resolver.authorize(),\n<span class="token prefix unchanged"> </span> async (input) => {\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   const question = await db.question.create({data: input})\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   const question = await db.question.create({\n<span class="token prefix inserted">+</span>     data: {\n<span class="token prefix inserted">+</span>       ...input,\n<span class="token prefix inserted">+</span>       choices: {create: input.choices},\n<span class="token prefix inserted">+</span>     },\n<span class="token prefix inserted">+</span>   })\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>   return question\n<span class="token prefix unchanged"> </span> },\n</span>)\n</code></pre>\n<h4 id="%E8%AF%95%E8%AF%95%E7%9C%8B">è¯•è¯•çœ‹<a class="anchor" href="#%E8%AF%95%E8%AF%95%E7%9C%8B">Â§</a></h4>\n<p>ç°åœ¨ä½ å¯ä»¥è½¬åˆ° <code>localhost:3000/questions/new</code> å¹¶åˆ›å»ºä¸€ä¸ªå¸¦æœ‰é€‰æ‹©çš„æ–°é—®é¢˜ï¼</p>\n<h3 id="%E5%88%97%E5%87%BA%E9%80%89%E6%8B%A9">åˆ—å‡ºé€‰æ‹©<a class="anchor" href="#%E5%88%97%E5%87%BA%E9%80%89%E6%8B%A9">Â§</a></h3>\n<p>è¯¥è½»æ¾ä¸€ä¸‹äº†ã€‚è¿”å›æµè§ˆå™¨ä¸­çš„ <code>localhost:3000/questions</code> å¹¶æŸ¥çœ‹ä½ åˆ›å»ºçš„æ‰€æœ‰é—®é¢˜ã€‚è®©æˆ‘ä»¬åœ¨è¿™äº›é—®é¢˜ä¸‹åˆ—å‡ºç›¸å…³çš„é€‰æ‹©å¦‚ä½•ï¼Ÿé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰é—®é¢˜æŸ¥è¯¢å‡½æ•°ã€‚åœ¨ Prisma ä¸­ï¼Œä½ éœ€è¦æ‰‹åŠ¨è®©å®¢æˆ·ç«¯çŸ¥é“ä½ éœ€è¦æŸ¥è¯¢çš„åµŒå¥—å…³ç³»ï¼Œå°†ä½ çš„ <code>getQuestion.ts</code> å’Œ <code>getQuestions.ts</code> æ–‡ä»¶æ›´æ”¹ä¸ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre class="language-diff"><code class="language-diff">// app/questions/queries/getQuestion.ts\n\nconst GetQuestion = z.object({\n<span class="token unchanged"><span class="token prefix unchanged"> </span> // This accepts type of undefined, but is required at runtime\n<span class="token prefix unchanged"> </span> id: z.number().optional().refine(Boolean, "Required"),\n</span>})\n\nexport default resolver.pipe(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> resolver.zod(GetQuestion),\n<span class="token prefix unchanged"> </span> resolver.authorize(),\n<span class="token prefix unchanged"> </span> async ({id}) => {\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   const question = await db.question.findFirst({where: {id}})\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   const question = await db.question.findFirst({\n<span class="token prefix inserted">+</span>     where: {id},\n<span class="token prefix inserted">+</span>     include: {choices: true},\n<span class="token prefix inserted">+</span>   })\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>   if (!question) throw new NotFoundError()\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>   return question\n<span class="token prefix unchanged"> </span> },\n</span>)\n</code></pre>\n<pre class="language-diff"><code class="language-diff">// app/questions/queries/getQuestions.ts\n\ninterface GetQuestionsInput\n<span class="token unchanged"><span class="token prefix unchanged"> </span> extends Pick&lt;\n<span class="token prefix unchanged"> </span>   Prisma.QuestionFindManyArgs,\n<span class="token prefix unchanged"> </span>   "where" | "orderBy" | "skip" | "take"\n<span class="token prefix unchanged"> </span> > {}\n</span>\nexport default resolver.pipe(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> resolver.authorize(),\n<span class="token prefix unchanged"> </span> async ({where, orderBy, skip = 0, take = 100}: GetQuestionsInput) => {\n<span class="token prefix unchanged"> </span>   const {items: questions, hasMore, nextPage, count} = await paginate({\n<span class="token prefix unchanged"> </span>     skip,\n<span class="token prefix unchanged"> </span>     take,\n<span class="token prefix unchanged"> </span>     count: () => db.question.count({where}),\n<span class="token prefix unchanged"> </span>     query: (paginateArgs) =>\n<span class="token prefix unchanged"> </span>       db.question.findMany({\n<span class="token prefix unchanged"> </span>         ...paginateArgs,\n<span class="token prefix unchanged"> </span>         where,\n<span class="token prefix unchanged"> </span>         orderBy,\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>         include: {choices: true},\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span>       }),\n<span class="token prefix unchanged"> </span>   })\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>   return {\n<span class="token prefix unchanged"> </span>     questions,\n<span class="token prefix unchanged"> </span>     nextPage,\n<span class="token prefix unchanged"> </span>     hasMore,\n<span class="token prefix unchanged"> </span>     count,\n<span class="token prefix unchanged"> </span>   }\n<span class="token prefix unchanged"> </span> },\n</span>)\n</code></pre>\n<p>ç°åœ¨åœ¨æµè§ˆå™¨ä¸­è·³å›æˆ‘ä»¬ä¸»è¦çš„ Question é¡µé¢ (<code>app/pages/questions/index.tsx</code>)ï¼Œæˆ‘ä»¬å¯ä»¥åˆ—å‡ºæ¯ä¸ªé—®é¢˜çš„é€‰æ‹©ã€‚å¹¶å°†æ­¤ä»£ç æ·»åŠ åˆ°æˆ‘ä»¬ <code>QuestionsList</code> ä¸­çš„ <code>Link</code> ä¸‹ï¼š</p>\n<pre class="language-diff"><code class="language-diff">// app/pages/questions/index.tsx\n\n// ...\n{\n<span class="token unchanged"><span class="token prefix unchanged"> </span> questions.map((question) => (\n<span class="token prefix unchanged"> </span>   &lt;li key={question.id}>\n<span class="token prefix unchanged"> </span>     &lt;Link href={`/questions/${question.id}`}>\n<span class="token prefix unchanged"> </span>       &lt;a>{question.text}&lt;/a>\n<span class="token prefix unchanged"> </span>     &lt;/Link>\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>     &lt;ul>\n<span class="token prefix inserted">+</span>       {question.choices.map((choice) => (\n<span class="token prefix inserted">+</span>         &lt;li key={choice.id}>\n<span class="token prefix inserted">+</span>           {choice.text} - {choice.votes} votes\n<span class="token prefix inserted">+</span>         &lt;/li>\n<span class="token prefix inserted">+</span>       ))}\n<span class="token prefix inserted">+</span>     &lt;/ul>\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span>   &lt;/li>\n<span class="token prefix unchanged"> </span> ))\n</span>}\n// ...\n</code></pre>\n<p>ç°åœ¨åœ¨æµè§ˆå™¨ä¸­è®¿é—® <code>/questions</code> è·¯ç”±ã€‚<strong>ç¥å¥‡å§ï¼</strong></p>\n<h3 id="%E8%AE%A9%E6%88%91%E4%BB%AC%E5%85%81%E8%AE%B8%E7%94%A8%E6%88%B7%E5%AF%B9%E8%BF%99%E4%BA%9B%E9%97%AE%E9%A2%98%E6%8A%95%E7%A5%A8">è®©æˆ‘ä»¬å…è®¸ç”¨æˆ·å¯¹è¿™äº›é—®é¢˜æŠ•ç¥¨ï¼<a class="anchor" href="#%E8%AE%A9%E6%88%91%E4%BB%AC%E5%85%81%E8%AE%B8%E7%94%A8%E6%88%B7%E5%AF%B9%E8%BF%99%E4%BA%9B%E9%97%AE%E9%A2%98%E6%8A%95%E7%A5%A8">Â§</a></h3>\n<p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <code>app/pages/questions/[questionId].tsx</code>ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†å¯¹è¯¥é¡µé¢è¿›è¡Œä¸€äº›æ”¹é€ ã€‚</p>\n<ol>\n<li>æ›¿æ¢ <code>&lt;h1&gt;Question {question.id}&lt;/h1&gt;</code> ä¸º <code>&lt;h1&gt;{question.text}&lt;/h1&gt;</code>.</li>\n<li>åˆ é™¤ <code>pre</code> å…ƒç´ ï¼Œå¹¶å°†å¦‚ä¸‹å¤åˆ¶åˆ°ä¹‹å‰å†™çš„é€‰æ‹©åˆ—è¡¨ä¸­ï¼š</li>\n</ol>\n<pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">\n  </span><span class="token punctuation">{</span>question<span class="token punctuation">.</span><span class="token property-access">choices</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">choice</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">}</span><span class="token plain-text"> - </span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">votes</span><span class="token punctuation">}</span><span class="token plain-text"> votes\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">\n</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>\n</code></pre>\n<p>å¦‚æœè¿”å›æµè§ˆå™¨ï¼Œé¡µé¢ç›®å‰çœ‹èµ·æ¥åƒè¿™æ ·ï¼</p>\n<p><img src="https://cdn.nlark.com/yuque/0/2021/png/86548/1616475118256-6e625fe9-db7f-44ec-9a07-68a3eced32c7.png#align=left&amp;display=inline&amp;height=285&amp;margin=%5Bobject%20Object%5D&amp;originHeight=570&amp;originWidth=1134&amp;size=0&amp;status=done&amp;style=none&amp;width=567" alt=""></p>\n<h3 id="%E7%8E%B0%E5%9C%A8%E6%98%AF%E6%97%B6%E5%80%99%E6%9D%A5%E5%A2%9E%E5%8A%A0%E6%8A%95%E7%A5%A8%E5%8A%9F%E8%83%BD">ç°åœ¨æ˜¯æ—¶å€™æ¥å¢åŠ æŠ•ç¥¨åŠŸèƒ½ï¼<a class="anchor" href="#%E7%8E%B0%E5%9C%A8%E6%98%AF%E6%97%B6%E5%80%99%E6%9D%A5%E5%A2%9E%E5%8A%A0%E6%8A%95%E7%A5%A8%E5%8A%9F%E8%83%BD">Â§</a></h3>\n<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ‰“å¼€ <code>app/choices/mutations/updateChoice.ts</code>ï¼Œæ›´æ–° zod æ¨¡å¼ï¼Œæ·»åŠ æ–°å¢æŠ•ç¥¨åŠŸèƒ½ã€‚</p>\n<pre class="language-diff"><code class="language-diff">const UpdateChoice = z\n<span class="token unchanged"><span class="token prefix unchanged"> </span> .object({\n<span class="token prefix unchanged"> </span>   id: z.number(),\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   name: z.string(),\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span> })\n<span class="token prefix unchanged"> </span> .nonstrict()\n</span>\nexport default resolver.pipe(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> resolver.zod(UpdateChoice),\n<span class="token prefix unchanged"> </span> resolver.authorize(),\n<span class="token prefix unchanged"> </span> async ({id, ...data}) => {\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   const choice = await db.choice.update({where: {id}, data})\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   const choice = await db.choice.update({\n<span class="token prefix inserted">+</span>     where: {id},\n<span class="token prefix inserted">+</span>     data: {votes: {increment: 1}},\n<span class="token prefix inserted">+</span>   })\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>   return choice\n<span class="token prefix unchanged"> </span> },\n</span>)\n</code></pre>\n<p>è¿”å›åˆ° <code>app/pages/questions/[questionId].tsx</code> ä¸­è¿›è¡Œå¦‚ä¸‹æ›´æ”¹ï¼š</p>\n<p>åœ¨æˆ‘ä»¬çš„ <code>li</code> ä¸­ï¼Œæ–°å¢ä¸€ä¸ªå¦‚ä¸‹çš„ <code>button</code>ï¼š</p>\n<pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n  </span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">}</span><span class="token plain-text"> - </span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">votes</span><span class="token punctuation">}</span><span class="token plain-text"> votes\n  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">Vote</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\n</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n</code></pre>\n<p>æ¥ä¸‹æ¥ï¼Œå¯¼å…¥æˆ‘ä»¬æ›´æ–°çš„ <code>updateChoice</code> mutationï¼Œå¹¶åœ¨é¡µé¢ä¸­åˆ›å»º <code>handleVote</code> å‡½æ•°ã€‚</p>\n<pre class="language-diff"><code class="language-diff">// app/pages/questions/[questionId].tsx\n<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>import updateChoice from "app/choices/mutations/updateChoice"\n</span>\n//...\n\nexport const Question = () => {\n<span class="token unchanged"><span class="token prefix unchanged"> </span> const router = useRouter()\n<span class="token prefix unchanged"> </span> const questionId = useParam("questionId", "number")\n<span class="token prefix unchanged"> </span> const [deleteQuestionMutation] = useMutation(deleteQuestion)\n<span class="token prefix unchanged"> </span> const [question] = useQuery(getQuestion, {id: questionId})\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span> const [updateChoiceMutation] = useMutation(updateChoice)\n<span class="token prefix inserted">+</span>\n<span class="token prefix inserted">+</span> const handleVote = async (id: number) => {\n<span class="token prefix inserted">+</span>   try {\n<span class="token prefix inserted">+</span>     await updateChoiceMutation({id})\n<span class="token prefix inserted">+</span>     refetch()\n<span class="token prefix inserted">+</span>   } catch (error) {\n<span class="token prefix inserted">+</span>     alert("Error updating choice " + JSON.stringify(error, null, 2))\n<span class="token prefix inserted">+</span>   }\n<span class="token prefix inserted">+</span> }\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span> return (\n</span></code></pre>\n<p>ç„¶åæˆ‘ä»¬éœ€è¦æ›´æ–°é—®é¢˜ç›¸å…³çš„ <code>useQuery</code> è°ƒç”¨ä»¥è¿”å›éœ€è¦åœ¨ <code>handleVote</code> å†…éƒ¨ä½¿ç”¨çš„ <code>refetch</code> å‡½æ•°ã€‚</p>\n<pre class="language-diff"><code class="language-diff">// app/pages/questions/[questionId].tsx\n\n//...\n<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span> const [question] = useQuery(getQuestion, {id: questionId})\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span> const [question, {refetch}] = useQuery(getQuestion, {id: questionId})\n</span>//...\n</code></pre>\n<p>æœ€åï¼Œæˆ‘ä»¬å°†å‘Šè¯‰æ–°çš„ <code>button</code> æ¥æ¡ç”¨è¯¥å‡½æ•°ï¼</p>\n<pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">handleVote</span><span class="token punctuation">(</span>choice<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Vote</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n</code></pre>\n<p>æœ€ç»ˆçš„ <code>Question</code> ç»„ä»¶åº”è¯¥æ˜¯è¿™ä¸ªæ ·å­ï¼š</p>\n<pre class="language-jsx"><code class="language-jsx"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function"><span class="token maybe-class-name">Question</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> questionId <span class="token operator">=</span> <span class="token function">useParam</span><span class="token punctuation">(</span><span class="token string">"questionId"</span><span class="token punctuation">,</span> <span class="token string">"number"</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>deleteQuestionMutation<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useMutation</span><span class="token punctuation">(</span>deleteQuestion<span class="token punctuation">)</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>question<span class="token punctuation">,</span> <span class="token punctuation">{</span>refetch<span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span>getQuestion<span class="token punctuation">,</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> questionId<span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>updateChoiceMutation<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useMutation</span><span class="token punctuation">(</span>updateChoice<span class="token punctuation">)</span>\n\n  <span class="token keyword">const</span> <span class="token function-variable function">handleVote</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>\n      <span class="token keyword control-flow">await</span> <span class="token function">updateChoiceMutation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token punctuation">)</span>\n      <span class="token function">refetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Error updating choice "</span> <span class="token operator">+</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Head</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token plain-text">Question </span><span class="token punctuation">{</span>question<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Head</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>question<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">\n          </span><span class="token punctuation">{</span>question<span class="token punctuation">.</span><span class="token property-access">choices</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">choice</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n              </span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">}</span><span class="token plain-text"> - </span><span class="token punctuation">{</span>choice<span class="token punctuation">.</span><span class="token property-access">votes</span><span class="token punctuation">}</span><span class="token plain-text"> votes\n              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">handleVote</span><span class="token punctuation">(</span>choice<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Vote</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">\n\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">href</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/questions/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>question<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/edit</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">></span></span><span class="token plain-text">Edit</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n\n        &lt;button\n          type="button"\n          onClick=</span><span class="token punctuation">{</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\n            <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">confirm</span><span class="token punctuation">(</span><span class="token string">"This will be deleted"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n              <span class="token keyword control-flow">await</span> <span class="token function">deleteQuestionMutation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">:</span> question<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n              router<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token string">"/questions"</span><span class="token punctuation">)</span>\n            <span class="token punctuation">}</span>\n          <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">\n          style=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token operator">:</span> <span class="token string">"0.5rem"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">\n        >\n          Delete\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<h3 id="%E6%9C%80%E5%90%8E%E8%AE%A9%E6%88%91%E4%BB%AC%E6%94%AF%E6%8C%81%E7%BC%96%E8%BE%91%E6%9F%90%E9%97%AE%E9%A2%98%E4%B8%8B%E7%9A%84%E4%B8%80%E4%B8%AA%E9%80%89%E6%8B%A9">æœ€åï¼Œè®©æˆ‘ä»¬æ”¯æŒç¼–è¾‘æŸé—®é¢˜ä¸‹çš„ä¸€ä¸ªé€‰æ‹©<a class="anchor" href="#%E6%9C%80%E5%90%8E%E8%AE%A9%E6%88%91%E4%BB%AC%E6%94%AF%E6%8C%81%E7%BC%96%E8%BE%91%E6%9F%90%E9%97%AE%E9%A2%98%E4%B8%8B%E7%9A%84%E4%B8%80%E4%B8%AA%E9%80%89%E6%8B%A9">Â§</a></h3>\n<p>å¦‚æœå•å‡»ç°æœ‰é—®é¢˜ä¹‹ä¸€ä¸Šçš„â€œç¼–è¾‘â€æŒ‰é’®ï¼Œä½ å°†çœ‹åˆ°å®ƒä½¿ç”¨ä¸åˆ›å»ºé—®é¢˜ç›¸åŒçš„å½¢å¼ã€‚è‡³\næ­¤ï¼Œè¯¥éƒ¨åˆ†å·²ç»å®Œæˆï¼æˆ‘ä»¬åªéœ€è¦æ›´æ–°æˆ‘ä»¬çš„ mutationã€‚</p>\n<p>æ‰“å¼€ <code>app/questions/mutations/updateQuestion.ts</code> å¹¶è¿›è¡Œå¦‚ä¸‹æ”¹åŠ¨ï¼š</p>\n<pre class="language-diff"><code class="language-diff">// app/questions/mutations/updateQuestion.ts\nimport {resolver} from "blitz"\nimport db from "db"\nimport * as z from "zod"\n\nconst UpdateQuestion = z\n<span class="token unchanged"><span class="token prefix unchanged"> </span> .object({\n<span class="token prefix unchanged"> </span>   id: z.number(),\n<span class="token prefix unchanged"> </span>   text: z.string(),\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   choices: z.array(\n<span class="token prefix inserted">+</span>     z.object({id: z.number().optional(), text: z.string()}).nonstrict(),\n<span class="token prefix inserted">+</span>   ),\n</span><span class="token unchanged"><span class="token prefix unchanged"> </span> })\n<span class="token prefix unchanged"> </span> .nonstrict()\n</span>\nexport default resolver.pipe(\n<span class="token unchanged"><span class="token prefix unchanged"> </span> resolver.zod(UpdateQuestion),\n<span class="token prefix unchanged"> </span> resolver.authorize(),\n<span class="token prefix unchanged"> </span> async ({id, ...data}) => {\n</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   const question = await db.question.update({where: {id}, data})\n</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   const question = await db.question.update({\n<span class="token prefix inserted">+</span>     where: {id},\n<span class="token prefix inserted">+</span>     data: {\n<span class="token prefix inserted">+</span>       ...data,\n<span class="token prefix inserted">+</span>       choices: {\n<span class="token prefix inserted">+</span>         upsert: data.choices.map((choice) => ({\n<span class="token prefix inserted">+</span>           // Appears to be a prisma bug,\n<span class="token prefix inserted">+</span>           // because `|| 0` shouldn\'t be needed\n<span class="token prefix inserted">+</span>           where: {id: choice.id || 0},\n<span class="token prefix inserted">+</span>           create: {text: choice.text},\n<span class="token prefix inserted">+</span>           update: {text: choice.text},\n<span class="token prefix inserted">+</span>         })),\n<span class="token prefix inserted">+</span>       },\n<span class="token prefix inserted">+</span>     },\n<span class="token prefix inserted">+</span>   })\n</span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span>   return question\n<span class="token prefix unchanged"> </span> },\n</span>)\n</code></pre>\n<p><code>[upsert](https://www.prisma.io/docs/reference/api-reference/prisma-client-reference#upsert)</code> æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ“ä½œï¼Œè¡¨ç¤ºâ€œå¦‚æœå­˜åœ¨æ­¤é¡¹ç›®ï¼Œè¯·å¯¹å…¶è¿›è¡Œæ›´æ–°ã€‚å¦åˆ™åˆ›å»ºå®ƒâ€ã€‚è¿™å¯¹äº\nå½“å‰æƒ…å†µæ˜¯å®Œç¾çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦ç”¨æˆ·åœ¨åˆ›å»ºé—®é¢˜æ—¶åŒæ—¶æ·»åŠ ä¸‰ä¸ªé€‰æ‹©ã€‚æ‰€ä»¥å¦‚æœ\nç”¨æˆ·é€šè¿‡ç¼–è¾‘é—®é¢˜æ·»åŠ å¦ä¸€ä¸ªé€‰æ‹©ï¼Œåˆ™å°†åœ¨æ­¤å¤„åˆ›å»ºå®ƒã€‚</p>\n<h3 id="%E7%BB%93%E5%B0%BE">ç»“å°¾<a class="anchor" href="#%E7%BB%93%E5%B0%BE">Â§</a></h3>\n<p>ğŸ¥³ æ­å–œï¼ä½ åˆ›å»ºäº†è‡ªå·±çš„ Blitz åº”ç”¨ï¼ç¥ä½ ç©å¾—å¼€å¿ƒï¼Œä¹Ÿæ¬¢è¿ä¸ä½ çš„æœ‹å‹åˆ†äº«ã€‚ç°åœ¨ï¼Œä½ å·²ç»å®Œæˆäº†æœ¬æ•™ç¨‹ï¼Œä¸ºä»€ä¹ˆä¸å°è¯•ä½¿ä½ çš„æŠ•ç¥¨åº”ç”¨å˜å¾—æ›´å¥½å‘¢ï¼Ÿä½ å¯ä»¥å°è¯•ï¼š</p>\n<ul>\n<li>æ·»åŠ æ ·å¼ (æç¤º, è¯•è¯• <code>blitz install tailwind</code> æˆ– <code>blitz install chakra-ui</code>)</li>\n<li>æ˜¾ç¤ºæ›´å¤šæœ‰å…³é€‰ç¥¨çš„ç»Ÿè®¡ä¿¡æ¯</li>\n<li>åœ¨ Render æˆ– Vercel ä¸Šå®æ—¶éƒ¨ç½²ã€‚</li>\n</ul>\n<p>å¦‚æœä½ æƒ³ä¸å…¨çƒ Blitz ç¤¾åŒºåˆ†äº«ä½ çš„é¡¹ç›®ï¼Œæ²¡æœ‰æ¯” Discord æ›´å¥½çš„åœ°æ–¹äº†ã€‚</p>\n<p>è®¿é—® <a href="https://discord.blitzjs.com">discord.blitzjs.com</a>ã€‚ç„¶åï¼Œå°†è¿æ¥å‘å¸ƒåˆ° <strong>#built-with-blitz</strong> é¢‘é“æ¥ä¸æ‰€æœ‰äººå…±äº«ï¼</p>\n<h2 id="%E8%AF%91%E8%80%85%E7%BB%93%E8%AF%AD">è¯‘è€…ç»“è¯­<a class="anchor" href="#%E8%AF%91%E8%80%85%E7%BB%93%E8%AF%AD">Â§</a></h2>\n<p>æœ¬æ–‡å†…å®¹å±äº <a href="https://blitzjs.com/docs">Blitz.js å®˜æ–¹æ–‡æ¡£</a> - ç®€ä»‹ç« èŠ‚çš„å‰åŠéƒ¨åˆ†ã€‚æ€»å…±åå››ä¸ªç« èŠ‚ï¼ˆç®€ä»‹ã€ç¤¾åŒºã€åŸºç¡€ã€é¡µé¢ã€è·¯ç”±ã€æƒé™ã€æ•°æ®åº“ã€Queries å’Œ Mutationsã€åç«¯æ¶æ„ã€éƒ¨ç½²ã€é…æ–¹ã€é…ç½®ã€CLI å’Œæ¨¡æ¿ï¼‰ã€‚æœªæ¥ä¸å®šæœŸç¿»è¯‘å…¶ä½™ç« èŠ‚ï¼Œä¹Ÿå¯èƒ½ä¼šåŸåˆ›ä¸€äº›æ–‡ç« ã€‚</p>\n<p>ã€Š<a href="https://github.com/hylerrix/blitzjs-tutorial">Blitz.js + React å…¨æ ˆå¼€å‘æ‰‹å†Œ</a>ã€‹ç³»åˆ—ä¸“æ³¨æ¢ç´¢ Blitz.js + React å…¨æ ˆåº”ç”¨å¼€å‘ï¼ŒåŸæ–‡ç¿»è¯‘å†…å®¹ä¼šåŒæ­¥æ›´æ–°åˆ° <a href="https://github.com/blitz-js/zh-hans.blitzjs.com">Blitz.js ä¸­æ–‡ä»“åº“</a> ä¸Šã€‚æ¬¢è¿ Starã€Watch æˆ–å…³æ³¨å…¬ä¼—å· (@ningowood) æ¥åŠæ—¶æ¥æ”¶æ¶ˆæ¯ã€‚</p>\n<blockquote>\n<p>2021 Â© <a href="https://github.com/hylerrix/blitzjs-tutorial">https://github.com/hylerrix/blitzjs-tutorial</a></p>\n</blockquote>'
        } }),
    'toc': React.createElement("nav", { key: "0", className: "toc" },
        React.createElement("ol", null,
            React.createElement("li", null,
                React.createElement("a", { href: "#%E8%AF%91%E8%80%85%E5%BA%8F" }, "\u8BD1\u8005\u5E8F")),
            React.createElement("li", null,
                React.createElement("a", { href: "#%E5%BF%AB%E9%80%9F%E5%85%A5%E6%89%8B" }, "\u5FEB\u901F\u5165\u624B"),
                React.createElement("ol", null,
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%E7%8E%AF%E5%A2%83" }, "\u914D\u7F6E\u4F60\u7684\u73AF\u5883")),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E5%AE%89%E8%A3%85-blitz" }, "\u5B89\u88C5 Blitz")),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E9%A1%B9%E7%9B%AE" }, "\u521B\u5EFA\u4E00\u4E2A\u65B0\u9879\u76EE")),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E6%AC%A2%E8%BF%8E%E6%9D%A5%E5%88%B0-blitz-%E7%A4%BE%E5%8C%BA-%F0%9F%91%8B" }, "\u6B22\u8FCE\u6765\u5230 Blitz \u793E\u533A \uD83D\uDC4B")),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E4%B8%8B%E4%B8%80%E6%AD%A5" }, "\u4E0B\u4E00\u6B65"),
                        React.createElement("ol", null)))),
            React.createElement("li", null,
                React.createElement("a", { href: "#%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B" }, "\u5165\u95E8\u6559\u7A0B"),
                React.createElement("ol", null,
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E5%BA%94%E7%94%A8" }, "\u521B\u5EFA\u4E00\u4E2A\u65B0\u5E94\u7528")),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%9C%8D%E5%8A%A1%E5%99%A8" }, "\u5F00\u53D1\u73AF\u5883\u670D\u52A1\u5668")),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E4%BB%A5%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD%E6%B3%A8%E5%86%8C" }, "\u4EE5\u7528\u6237\u8EAB\u4EFD\u6CE8\u518C")),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E7%BC%96%E5%86%99%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2" }, "\u7F16\u5199\u4F60\u7684\u7B2C\u4E00\u4E2A\u9875\u9762")),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE" }, "\u6570\u636E\u5E93\u914D\u7F6E")),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E4%BB%A3%E7%A0%81" }, "\u6A21\u578B\u7684\u811A\u624B\u67B6\u4EE3\u7801"),
                        React.createElement("ol", null)),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E8%AE%BF%E9%97%AE-prisma-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%A2%E6%88%B7%E7%AB%AF" }, "\u8BBF\u95EE Prisma \u6570\u636E\u5E93\u5BA2\u6237\u7AEF")),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E6%9B%B4%E6%96%B0%E6%A8%A1%E5%9E%8B%E5%B1%9E%E6%80%A7%E7%94%9F%E6%88%90%E7%9A%84%E4%BB%A3%E7%A0%81" }, "\u66F4\u65B0\u6A21\u578B\u5C5E\u6027\u751F\u6210\u7684\u4EE3\u7801"),
                        React.createElement("ol", null)),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E5%9C%A8%E9%97%AE%E9%A2%98%E8%A1%A8%E6%A0%BC%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%80%89%E6%8B%A9%E9%A1%B9" }, "\u5728\u95EE\u9898\u8868\u683C\u4E2D\u6DFB\u52A0\u9009\u62E9\u9879"),
                        React.createElement("ol", null)),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E5%88%97%E5%87%BA%E9%80%89%E6%8B%A9" }, "\u5217\u51FA\u9009\u62E9")),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E8%AE%A9%E6%88%91%E4%BB%AC%E5%85%81%E8%AE%B8%E7%94%A8%E6%88%B7%E5%AF%B9%E8%BF%99%E4%BA%9B%E9%97%AE%E9%A2%98%E6%8A%95%E7%A5%A8" }, "\u8BA9\u6211\u4EEC\u5141\u8BB8\u7528\u6237\u5BF9\u8FD9\u4E9B\u95EE\u9898\u6295\u7968\uFF01")),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E7%8E%B0%E5%9C%A8%E6%98%AF%E6%97%B6%E5%80%99%E6%9D%A5%E5%A2%9E%E5%8A%A0%E6%8A%95%E7%A5%A8%E5%8A%9F%E8%83%BD" }, "\u73B0\u5728\u662F\u65F6\u5019\u6765\u589E\u52A0\u6295\u7968\u529F\u80FD\uFF01")),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E6%9C%80%E5%90%8E%E8%AE%A9%E6%88%91%E4%BB%AC%E6%94%AF%E6%8C%81%E7%BC%96%E8%BE%91%E6%9F%90%E9%97%AE%E9%A2%98%E4%B8%8B%E7%9A%84%E4%B8%80%E4%B8%AA%E9%80%89%E6%8B%A9" }, "\u6700\u540E\uFF0C\u8BA9\u6211\u4EEC\u652F\u6301\u7F16\u8F91\u67D0\u95EE\u9898\u4E0B\u7684\u4E00\u4E2A\u9009\u62E9")),
                    React.createElement("li", null,
                        React.createElement("a", { href: "#%E7%BB%93%E5%B0%BE" }, "\u7ED3\u5C3E")))),
            React.createElement("li", null,
                React.createElement("a", { href: "#%E8%AF%91%E8%80%85%E7%BB%93%E8%AF%AD" }, "\u8BD1\u8005\u7ED3\u8BED")))),
    'author': "hylerrix",
    'contributors': [
        "hylerrix"
    ],
    'date': "2021-03-23T07:13:02.000Z",
    'updated': null,
    'excerpt': "è¯‘è€…åº è‹¦ JS ç”Ÿæ€ä¹…å·²ã€‚åœ¨ 2020 å¹´åï¼Œä¸€ç›´å¾˜å¾Šäºè¯¥ä¸ºè‡ªå·±æ„å»ºæ€æ ·çš„æŠ€æœ¯æ ˆï¼Œè¿Ÿè¿Ÿæ²¡æœ‰å¤ªå¤šè½åœ°æˆæœâ€”â€”åº“å¤ªå¤šäº†ï¼Œä¸€ä¸ªå°åœºæ™¯å°±èƒ½æœ‰å¾ˆå¤šä¸ªè§£å†³æ–¹æ¡ˆï¼›æ–¹å‘ä¹Ÿå¤ªå¤šäº†ï¼Œå“ªæ€•å¤§å‰ç«¯ä¸‰ä¸ªå­—ï¼Œç°ä»Šéƒ½èƒ½æ‹†åˆ†ä¸ºå¾ˆå¤šçš„ç»†åˆ†é¢†åŸŸã€‚ç›´åˆ°é‡åˆ°äº†...",
    'cover': "https://cdn.nlark.com/yuque/0/2021/png/86548/1616475118256-6e625fe9-db7f-44ec-9a07-68a3eced32c7.png#align=left&display=inline&height=285&margin=%5Bobject%20Object%5D&originHeight=570&originWidth=1134&size=0&status=done&style=none&width=567",
    'sidebar': [
        {
            "link": "articles/blitz/README.md",
            "title": "Blitz.js ç¯‡",
            "children": [],
            "text": "articles/blitz/README.md"
        },
        {
            "link": "articles/blitz/README.md",
            "title": "æ¢ç´¢ç¯‡",
            "children": [
                {
                    "text": "æ·±å…¥æµ…å‡º Create React App",
                    "link": "articles/explore/create-react-app-intro.html",
                    "pagePath": "articles/explore/create-react-app-intro.md"
                },
                {
                    "text": "æ¬²å–ä»£ç»å¤§å¤š JavaScript å·¥å…·é“¾ï¼ŸRome å°é²œ",
                    "link": "articles/explore/javascript-toolchain-rome.html",
                    "pagePath": "articles/explore/javascript-toolchain-rome.md"
                }
            ],
            "text": "articles/blitz/README.md"
        }
    ]
};
